# 大页内存

## 可获得性<a name="section3480125215575"></a>

本特性自openGauss 5.1.0版本开始引入。

## 特性简介<a name="section5814521587"></a>

通过操作系统大页内存的使用，优化数据库的共享内存，提升在大内存环境下数据库的性能表现。

## 客户价值<a name="section148987345811"></a>

提升客户在大内存生产环境下数据库的性能表现。

## 特性描述<a name="section117041846581"></a>

操作系统页表所需空间会随着运行环境总内存的增加而增加。在数百GB级别的内存环境中，使用4K的内存页将导致数据库进程页表空间变大，同时TLB miss的概率增加，这将拖慢数据库的查询速度，并且浪费主存空间。为避免大内存运行环境下系统内存页过小导致性能下降，openGauss引入大页内存功能。当配置文件的enable_huge_pages设置为on时，openGauss数据库在启动时将从操作系统预分配的大页内存中创建共享内存。

用户可以根据运行环境决定是否开启大页内存。根据实践，数百GB级别内存的环境下，若系统内存页大小为4K，开启大页内存可以提高数据库性能。一般而言，数百GB级别的环境下，可以考虑使用大小为2MB的大页；若环境内存达到TB级别，可以选择更大的大页。

## 特性增强<a name="section21149265913"></a>

无。

## 特性约束<a name="section51513617597"></a>

当数据库启用大页内存功能时，buffer pool使用的共享内存依赖于操作系统的大页内存设置。启用大页内存后，若系统设置不当，数据库将无法启动。详细实践可参考[大页内存](../DatabaseReference/大页内存.md)

## 依赖关系<a name="section20491151513592"></a>

无。

