# 其它函数<a name="ZH-CN_TOPIC_0289900063"></a>

-   plan\_seed\(\)

    描述：获取前一次查询语句的seed值（内部使用）。

    返回值类型：int

-   pg\_stat\_get\_env\(\)

    描述：获取当前节点的环境变量信息，仅sysadmin和monitor admin可以访问。

    返回值类型：record

    示例：

    ```
    openGauss=# select pg_stat_get_env();
                                                                                  pg_stat_get_env
    ---------------------------------------------------------------------------------------------------------------------------------------
     (coordinator1,localhost,144773,49100,/data1/openGauss_TRUNK/install,/data1/openGauss_TRUNK/install/data/coordinator1,pg_log)
    (1 row)
    ```

-   pg\_catalog.plancache\_clean\(\)

    描述：清理节点上无人使用的全局计划缓存。

    返回值类型：bool

-   pg\_catalog.plancache\_status\(\)

    描述：显示节点上全局计划缓存的信息，函数返回信息和[GLOBAL\_PLANCACHE\_STATUS](GLOBAL_PLANCACHE_STATUS.md)一致。

    返回值类型：record

-   textlen\(text\)

    描述：提供查询text的逻辑长度的方法。

    返回值类型：int

-   threadpool\_status\(\)

    描述：显示线程池中工作线程及会话的状态信息。

    返回值类型：record

-   get\_local\_active\_session\(\)

    描述：提供当前节点保存在内存中的历史活跃session状态的采样记录。

    返回值类型：record

-   pg\_stat\_get\_thread\(\)

    描述：提供当前节点下所有线程的状态信息，sysadmin和monitor admin用户可以查看所有线程信息，普通用户查看本用户的线程信息。

    返回值类型：record

-   pg\_stat\_get\_sql\_count\(\)

    描述：提供当前节点中用户执行的SELECT/UPDATE/INSERT/DELETE/MERGE INTO语句的计数结果，sysadmin和monitor admin用户可以查看所有用户的信息，普通用户查看本用户的统计信息。

    返回值类型：record

-   pg\_stat\_get\_data\_senders\(\)

    描述：提供当前活跃的数据复制发送线程的详细信息。

    返回值类型：record

-   get\_wait\_event\_info\(\)

    描述：提供wait event事件的具体信息。

    返回值类型：record

-   generate\_wdr\_report\(begin\_snap\_id bigint, end\_snap\_id bigint, report\_type cstring, report\_scope cstring, node\_name cstring\)

    描述：基于两个snapshot生成系统诊断报告。需要在postgres库下执行，默认初始化用户或monadmin用户可以访问，V500R001C20SPC002及其之前的版本初始化用户或sysadmin用户可以访问。只可在系统库中查询到结果，用户库中无法查询。

    返回值类型：record

    **表 1**  generate\_wdr\_report 参数说明

    <a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_table1757513581634"></a>
    <table><tbody><tr id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_row1280114581437"><td class="cellrowborder" valign="top" width="20.24%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p11801115814318"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p11801115814318"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p11801115814318"></a>参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="45.29%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p158015584310"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p158015584310"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p158015584310"></a>说明</p>
    </td>
    <td class="cellrowborder" valign="top" width="34.47%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1880217581937"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1880217581937"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1880217581937"></a>取值范围</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_row680211581937"><td class="cellrowborder" valign="top" width="20.24%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p380217581314"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p380217581314"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p380217581314"></a>begin_snap_id</p>
    </td>
    <td class="cellrowborder" valign="top" width="45.29%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p128028581331"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p128028581331"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p128028581331"></a>生成某段时间内性能诊断报告的开始snapshotid。</p>
    </td>
    <td class="cellrowborder" valign="top" width="34.47%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p78026587313"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p78026587313"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p78026587313"></a>-</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_row7802105817316"><td class="cellrowborder" valign="top" width="20.24%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p198029587313"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p198029587313"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p198029587313"></a>end_snap_id</p>
    </td>
    <td class="cellrowborder" valign="top" width="45.29%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1080215589316"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1080215589316"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1080215589316"></a>结束snapshot的id，默认end_snap_id大于begin_snap_id。</p>
    </td>
    <td class="cellrowborder" valign="top" width="34.47%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p5802158436"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p5802158436"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p5802158436"></a>-</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_row1280225810310"><td class="cellrowborder" valign="top" width="20.24%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p580217585317"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p580217585317"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p580217585317"></a>report_type</p>
    </td>
    <td class="cellrowborder" valign="top" width="45.29%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p19803858132"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p19803858132"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p19803858132"></a>指定生成report的类型。</p>
    </td>
    <td class="cellrowborder" valign="top" width="34.47%"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_ul9103640142011"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_ul9103640142011"></a><ul id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_ul9103640142011"><li>summary</li><li>detail</li><li>all，即同时包含summary 和 detail。</li></ul>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_row148031458936"><td class="cellrowborder" valign="top" width="20.24%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p28038584317"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p28038584317"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p28038584317"></a>report_scope</p>
    </td>
    <td class="cellrowborder" valign="top" width="45.29%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p108034581732"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p108034581732"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p108034581732"></a>指定生成report的范围。</p>
    </td>
    <td class="cellrowborder" valign="top" width="34.47%"><a name="ul10102152712184"></a><a name="ul10102152712184"></a><ul id="ul10102152712184"><li>cluster：数据库级别的信息</li><li>node：节点级别的信息</li></ul>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_row188031958732"><td class="cellrowborder" valign="top" width="20.24%"><p id="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1280316588318"><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1280316588318"></a><a name="zh-cn_topic_0283137465_zh-cn_topic_0237121997_p1280316588318"></a>node_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="45.29%"><p id="zh-cn_topic_0283137259_p9831125295619"><a name="zh-cn_topic_0283137259_p9831125295619"></a><a name="zh-cn_topic_0283137259_p9831125295619"></a>在report_scope指定为node时，需要把该参数指定为对应节点的名称。（节点名称可以执行select * from pg_node_env;查询）。</p>
    <p id="zh-cn_topic_0283137259_p941074755313"><a name="zh-cn_topic_0283137259_p941074755313"></a><a name="zh-cn_topic_0283137259_p941074755313"></a>在report_scope为cluster时，该值可以省略或者指定为空或NULL。</p>
    </td>
    <td class="cellrowborder" valign="top" width="34.47%"><a name="ul8919134451817"></a><a name="ul8919134451817"></a><ul id="ul8919134451817"><li>cluster：省略/空/NULL</li><li>node： openGauss中的节点名称</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   create\_wdr\_snapshot\(\)

    描述：手工生成系统诊断快照，该函数需要sysadmin权限。可在单机节点或集群主节点上执行。

    返回值类型：text

-   kill\_snapshot\(\)

    描述：kill后台的WDR snapshot线程，调用该函数的用户需要具有SYSADMIN权限或具有REPLICATION权限或继承了内置角色gs\_role\_replication的权限。

    返回值类型：void

-   capture\_view\_to\_json\(text,integer\)

    描述：将视图的结果存入GUC: perf\_directory所指定的目录，如果is\_crossdb为1，则表示对于所有的database都会访问一次view；如果is\_crossdb为0，则表示仅对当前database进行一次视图访问。该函数只有sysadmin和monitor admin用户可以执行。

    返回值类型：int

-   reset\_unique\_sql

    描述：用来清理数据库节点内存中的Unique SQL（需要sysadmin权限）。

    返回值类型：bool

    **表 2**  reset\_unique\_sql参数说明

    <a name="zh-cn_topic_0283137465_table143441146077"></a>
    <table><thead align="left"><tr id="zh-cn_topic_0283137465_row934420464720"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0283137465_p7344646272"><a name="zh-cn_topic_0283137465_p7344646272"></a><a name="zh-cn_topic_0283137465_p7344646272"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0283137465_p123445461977"><a name="zh-cn_topic_0283137465_p123445461977"></a><a name="zh-cn_topic_0283137465_p123445461977"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0283137465_p4344646478"><a name="zh-cn_topic_0283137465_p4344646478"></a><a name="zh-cn_topic_0283137465_p4344646478"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="zh-cn_topic_0283137465_row634484612716"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137465_p1322984713256"><a name="zh-cn_topic_0283137465_p1322984713256"></a><a name="zh-cn_topic_0283137465_p1322984713256"></a>scope</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137465_p9227144715250"><a name="zh-cn_topic_0283137465_p9227144715250"></a><a name="zh-cn_topic_0283137465_p9227144715250"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137465_p1322620473258"><a name="zh-cn_topic_0283137465_p1322620473258"></a><a name="zh-cn_topic_0283137465_p1322620473258"></a>清理范围类型：</p>
    <a name="zh-cn_topic_0283137465_ul27053230486"></a><a name="zh-cn_topic_0283137465_ul27053230486"></a><ul id="zh-cn_topic_0283137465_ul27053230486"><li>'GLOBAL'：清理所有的节点，如果是'GLOBAL'，则只可以为主节点执行此函数。</li><li>'LOCAL'：清理本节点。</li></ul>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_row113456461571"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137465_p13830135712614"><a name="zh-cn_topic_0283137465_p13830135712614"></a><a name="zh-cn_topic_0283137465_p13830135712614"></a>clean_type</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137465_p1722494715253"><a name="zh-cn_topic_0283137465_p1722494715253"></a><a name="zh-cn_topic_0283137465_p1722494715253"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><a name="zh-cn_topic_0283137465_ul9212421184913"></a><a name="zh-cn_topic_0283137465_ul9212421184913"></a><ul id="zh-cn_topic_0283137465_ul9212421184913"><li>'BY_USERID'：按用户ID来进行清理Unique SQL。</li><li>'BY_CNID'：按主节点的ID来进行清理Unique SQL。</li><li>'ALL'：全部清理。</li></ul>
    </td>
    </tr>
    <tr id="zh-cn_topic_0283137465_row934510461379"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137465_p1122194711253"><a name="zh-cn_topic_0283137465_p1122194711253"></a><a name="zh-cn_topic_0283137465_p1122194711253"></a>clean_value</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137465_p1922034720255"><a name="zh-cn_topic_0283137465_p1922034720255"></a><a name="zh-cn_topic_0283137465_p1922034720255"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137465_p19219947132513"><a name="zh-cn_topic_0283137465_p19219947132513"></a><a name="zh-cn_topic_0283137465_p19219947132513"></a>具体清理type对应的清理值。</p>
    </td>
    </tr>
    </tbody>
    </table>

    >![](public_sys-resources/icon-notice.gif) **须知：** 
    >
    >-   scope的取值GLOBAL和LOCAL针对分布式，对于openGauss而言两者意义相同，均表示清理本节点。
    >-   clean\_type的值BY\_CNID仅针对分布式，对于openGauss无效。

-   wdr\_xdb\_query\(db\_name\_str text, query text\)

    描述：提供本地跨数据库执行query的能力。例如: 在连接到postgres库时, 访问test库下的表。

    ```
    select col1 from wdr_xdb_query('dbname=test','select col1 from t1') as dd(col1 int);
    ```

    返回值类型：record

-   pg\_wlm\_jump\_queue\(pid int\)

    描述：调整任务到数据库主节点队列的最前端。

    返回值类型：boolean

    -   true：成功。
    -   false：失败。

-   gs\_wlm\_switch\_cgroup\(pid int, cgroup text\)

    描述：调整作业的优先级到新控制组。

    返回值类型：boolean

    -   true：成功。
    -   false：失败。

-   pv\_session\_memctx\_detail\(threadid tid, MemoryContextName text\)

    描述：将线程tid的MemoryContextName内存上下文信息记录到“$GAUSSLOG/pg\_log/$\{node\_name\}/dumpmem”目录下的“threadid\_timestamp.log”文件中。其中threadid可通过视图GS\_SESSION\_MEMORY\_DETAIL中的sessid后获得。在正式发布的版本中仅接受MemoryContextName为空串（两个单引号表示输入为空串，即''）的输入，此时会记录所有的内存上下文信息，否则不会有任何操作。对供内部开发人员和测试人员调试用的DEBUG版本，可以指定需要统计的MemoryContextName，此时会将该Context所有的内存使用情况记录到指定文件。该函数需要管理员权限的用户才能执行。

    返回值类型：boolean

    -   true：成功。
    -   false：失败。

-   pg\_shared\_memctx\_detail\(MemoryContextName text\)

    描述：将MemoryContextName内存上下文信息记录到“$GAUSSLOG/pg\_log/$\{node\_name\}/dumpmem”目录下的“threadid\_timestamp.log”文件中。该函数功能仅在DEBUG版本中供内部开发人员和测试人员调试使用，在正式发布版本中调用该函数不会有任何操作。该函数需要管理员权限的用户才能执行。

    返回值类型：boolean

    -   true：成功。
    -   false：失败。

-   local\_bgwriter\_stat\(\)

    描述：显示本实例的bgwriter线程刷页信息，候选buffer链中页面个数，buffer淘汰信息。

    返回值类型：record

-   local\_candidate\_stat\(\)

    描述：显示本实例的候选buffer链中页面个数，buffer淘汰信息，包含normal buffer pool和segment buffer pool。

    返回值类型：record

-   local\_ckpt\_stat\(\)

    描述：显示本实例的检查点信息和各类日志刷页情况。

    返回值类型：record

-   local\_double\_write\_stat\(\)

    描述：显示本实例的双写文件的情况。

    返回值类型：record

    **表 3**  local\_double\_write\_stat参数说明

    <a name="table114614044512"></a>
    <table><thead align="left"><tr id="row17462206459"><th class="cellrowborder" valign="top" width="23.97239723972397%" id="mcps1.2.4.1.1"><p id="p346200164518"><a name="p346200164518"></a><a name="p346200164518"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="16.011601160116008%" id="mcps1.2.4.1.2"><p id="p1746215014511"><a name="p1746215014511"></a><a name="p1746215014511"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="60.01600160016001%" id="mcps1.2.4.1.3"><p id="p1346216017458"><a name="p1346216017458"></a><a name="p1346216017458"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row24620014450"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p473452212452"><a name="p473452212452"></a><a name="p473452212452"></a>node_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p79851581477"><a name="p79851581477"></a><a name="p79851581477"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p18731522104518"><a name="p18731522104518"></a><a name="p18731522104518"></a>实例名称。</p>
    </td>
    </tr>
    <tr id="row046217018452"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p14730152211451"><a name="p14730152211451"></a><a name="p14730152211451"></a>curr_dwn</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p187292227454"><a name="p187292227454"></a><a name="p187292227454"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p187285224456"><a name="p187285224456"></a><a name="p187285224456"></a>当前双写文件的序列号。</p>
    </td>
    </tr>
    <tr id="row746215010451"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p17726142218452"><a name="p17726142218452"></a><a name="p17726142218452"></a>curr_start_page</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p157251222154516"><a name="p157251222154516"></a><a name="p157251222154516"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p18724152254517"><a name="p18724152254517"></a><a name="p18724152254517"></a>当前双写文件恢复起始页面。</p>
    </td>
    </tr>
    <tr id="row44631901458"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p14723122134518"><a name="p14723122134518"></a><a name="p14723122134518"></a>file_trunc_num</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p1172222254514"><a name="p1172222254514"></a><a name="p1172222254514"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p1572162218455"><a name="p1572162218455"></a><a name="p1572162218455"></a>当前双写文件复用的次数。</p>
    </td>
    </tr>
    <tr id="row154637034514"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p571972254512"><a name="p571972254512"></a><a name="p571972254512"></a>file_reset_num</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p19718122215453"><a name="p19718122215453"></a><a name="p19718122215453"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p18717922114515"><a name="p18717922114515"></a><a name="p18717922114515"></a>当前双写文件写满后发生重置的次数。</p>
    </td>
    </tr>
    <tr id="row046415019457"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p10716112294511"><a name="p10716112294511"></a><a name="p10716112294511"></a>total_writes</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p271552214519"><a name="p271552214519"></a><a name="p271552214519"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p871316222455"><a name="p871316222455"></a><a name="p871316222455"></a>当前双写文件总的I/O次数。</p>
    </td>
    </tr>
    <tr id="row18464150104515"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p2712722134514"><a name="p2712722134514"></a><a name="p2712722134514"></a>low_threshold_writes</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p571119226451"><a name="p571119226451"></a><a name="p571119226451"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p6690192214514"><a name="p6690192214514"></a><a name="p6690192214514"></a>低效率写双写文件的I/O次数（一次I/O刷页数量少于16页面）。</p>
    </td>
    </tr>
    <tr id="row137178298462"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p1671892917469"><a name="p1671892917469"></a><a name="p1671892917469"></a>high_threshold_writes</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p137181429144610"><a name="p137181429144610"></a><a name="p137181429144610"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p11718132917460"><a name="p11718132917460"></a><a name="p11718132917460"></a>高效率写双写文件的I/O次数（一次I/O刷页数量多于一批，421个页面）。</p>
    </td>
    </tr>
    <tr id="row6718192964614"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p1271892918461"><a name="p1271892918461"></a><a name="p1271892918461"></a>total_pages</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p6718192914463"><a name="p6718192914463"></a><a name="p6718192914463"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p1371882919465"><a name="p1371882919465"></a><a name="p1371882919465"></a>当前刷页到双写文件区的总的页面个数。</p>
    </td>
    </tr>
    <tr id="row27182296469"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p671832912461"><a name="p671832912461"></a><a name="p671832912461"></a>low_threshold_pages</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p371862910461"><a name="p371862910461"></a><a name="p371862910461"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p8718162919468"><a name="p8718162919468"></a><a name="p8718162919468"></a>低效率刷页的页面个数。</p>
    </td>
    </tr>
    <tr id="row18718029154616"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p17181329184616"><a name="p17181329184616"></a><a name="p17181329184616"></a>high_threshold_pages</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p8718122918460"><a name="p8718122918460"></a><a name="p8718122918460"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p471914298468"><a name="p471914298468"></a><a name="p471914298468"></a>高效率刷页的页面个数。</p>
    </td>
    </tr>
    <tr id="row151121410308"><td class="cellrowborder" valign="top" width="23.97239723972397%" headers="mcps1.2.4.1.1 "><p id="p111364203012"><a name="p111364203012"></a><a name="p111364203012"></a>file_id</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.011601160116008%" headers="mcps1.2.4.1.2 "><p id="p141131545309"><a name="p141131545309"></a><a name="p141131545309"></a>int8</p>
    </td>
    <td class="cellrowborder" valign="top" width="60.01600160016001%" headers="mcps1.2.4.1.3 "><p id="p181131541308"><a name="p181131541308"></a><a name="p181131541308"></a>当前双写文件的id号。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   local\_single\_flush\_dw\_stat\(\)

    描述：显示本实例的单页面淘汰双写文件的情况。

    返回值类型：record

-   local\_pagewriter\_stat\(\)

    描述：显示本实例的刷页信息和检查点信息。

    返回值类型：record

-   local\_redo\_stat\(\)

    描述：显示本实例的备机的当前回放状态。

    返回值类型：record

    备注：返回的回放状态主要包括当前回放位置，回放最小恢复点位置等信息。

-   local\_recovery\_status\(\)

    描述：显示本实例的主机和备机的日志流控信息。

    返回值类型：record

-   gs\_wlm\_node\_recover\(boolean isForce\)

    描述：获取当前内存中记录的TopSQL查询语句级别相关统计信息，当传入的参数不为0时，会将这部分信息从内存中清理掉。

    返回值类型：record

-   gs\_wlm\_node\_clean\(cstring nodename\)

    描述：动态负载管理节点故障后做数据清理操作。该函数只有管理员用户可以执行，属于数据库实例管理模块调用的，不建议用户直接调用。该视图在集中式和单机环境上不支持。

    返回值类型：bool

-   gs\_cgroup\_map\_ng\_conf\(group name\)

    描述：读取指定逻辑数据库的cgroup配置文件。

    返回值类型：record

-   gs\_wlm\_switch\_cgroup\(sess\_id int8, cgroup name\)

    描述：切换指定会话的控制组。

    返回值类型：record

-   comm\_client\_info\(\)

    描述：用于查询单个节点活跃的客户端连接信息。

    返回值类型：setof record

-   pg\_sync\_cstore\_delta\(text\)

    描述：同步指定列存表的delta表表结构，使其与列存表主表一致。

    返回值类型：bigint

-   pg\_sync\_cstore\_delta\(\)

    描述：同步所有列存表的delta表表结构，使其与列存表主表一致。

    返回值类型：bigint

-   pg\_get\_flush\_lsn\(\)

    描述：返回当前节点flush的xlog位置。

    返回值类型：text

-   pg\_get\_sync\_flush\_lsn\(\)

    描述：返回当前节点多数派flush的xlog位置。

    返回值类型：text

-   gs\_create\_log\_tables\(\)

    描述：用于创建运行日志和性能日志的外表和视图。单机模式下不支持。

    返回值类型：void

    示例：

    ```
    openGauss=# select gs_create_log_tables();
     gs_create_log_tables
    ----------------------
    
    (1 row)
    ```

-   dbe\_perf.get\_global\_full\_sql\_by\_timestamp\(start\_timestamp timestamp with time zone, end\_timestamp timestamp with time zone\)

    描述：获取数据库级的全量SQL\(Full SQL\)信息。只可在系统库中查询到结果，用户库中无法查询。

    返回值类型：record

    **表 4**  dbe\_perf.get\_global\_full\_sql\_by\_timestamp参数说明

    <a name="table173628271511"></a>
    <table><thead align="left"><tr id="row2036210271054"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p63621027457"><a name="p63621027457"></a><a name="p63621027457"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="22.06220622062206%" id="mcps1.2.4.1.2"><p id="p3362327156"><a name="p3362327156"></a><a name="p3362327156"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.69576957695769%" id="mcps1.2.4.1.3"><p id="p13362627452"><a name="p13362627452"></a><a name="p13362627452"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row173625271356"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p638719511858"><a name="p638719511858"></a><a name="p638719511858"></a>start_timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p152934101864"><a name="p152934101864"></a><a name="p152934101864"></a>timestamp with time zone</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><p id="p1376712315612"><a name="p1376712315612"></a><a name="p1376712315612"></a>SQL启动时间范围的开始时间点。</p>
    </td>
    </tr>
    <tr id="row17363142719512"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p129832059655"><a name="p129832059655"></a><a name="p129832059655"></a>end_timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p14382011366"><a name="p14382011366"></a><a name="p14382011366"></a>timestamp with time zone</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><p id="p1736312720519"><a name="p1736312720519"></a><a name="p1736312720519"></a>SQL启动时间范围的结束时间点。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   dbe\_perf.get\_global\_slow\_sql\_by\_timestamp\(start\_timestamp timestamp with time zone, end\_timestamp timestamp with time zone\)

    描述：获取数据库级的慢SQL\(Slow SQL\)信息。只可在系统库中查询到结果，用户库中无法查询。

    返回值类型：record

    **表 5**  dbe\_perf.get\_global\_slow\_sql\_by\_timestamp参数说明

    <a name="table152133591871"></a>
    <table><thead align="left"><tr id="row72147595714"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p1921419591570"><a name="p1921419591570"></a><a name="p1921419591570"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="22.06220622062206%" id="mcps1.2.4.1.2"><p id="p221415916720"><a name="p221415916720"></a><a name="p221415916720"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.69576957695769%" id="mcps1.2.4.1.3"><p id="p32140592071"><a name="p32140592071"></a><a name="p32140592071"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row3214185916710"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p1721455912713"><a name="p1721455912713"></a><a name="p1721455912713"></a>start_timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p12143595711"><a name="p12143595711"></a><a name="p12143595711"></a>timestamp with time zone</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><p id="p1721455914713"><a name="p1721455914713"></a><a name="p1721455914713"></a>SQL启动时间范围的开始时间点。</p>
    </td>
    </tr>
    <tr id="row321413592710"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p162141759672"><a name="p162141759672"></a><a name="p162141759672"></a>end_timestamp</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p202141559372"><a name="p202141559372"></a><a name="p202141559372"></a>timestamp with time zone</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><p id="p1421455917712"><a name="p1421455917712"></a><a name="p1421455917712"></a>SQL启动时间范围的结束时间点。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   statement\_detail\_decode\(detail text, format text, pretty boolean\)

    描述：解析全量/慢SQL语句中的details字段的信息。只可在系统库中查询到结果，用户库中无法查询。

    返回值类型：text

    **表 6**  statement\_detail\_decode参数说明

    <a name="table9745177191215"></a>
    <table><thead align="left"><tr id="row127451717124"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p1974687151213"><a name="p1974687151213"></a><a name="p1974687151213"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="22.06220622062206%" id="mcps1.2.4.1.2"><p id="p147461271125"><a name="p147461271125"></a><a name="p147461271125"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.69576957695769%" id="mcps1.2.4.1.3"><p id="p197461975128"><a name="p197461975128"></a><a name="p197461975128"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row167467711212"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p197461379124"><a name="p197461379124"></a><a name="p197461379124"></a>detail</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p137462712123"><a name="p137462712123"></a><a name="p137462712123"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><p id="p138588178133"><a name="p138588178133"></a><a name="p138588178133"></a>SQL语句产生的事件的集合（不可读）。</p>
    </td>
    </tr>
    <tr id="row187462714127"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p1674617710129"><a name="p1674617710129"></a><a name="p1674617710129"></a>format</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p17746137131219"><a name="p17746137131219"></a><a name="p17746137131219"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><p id="p246504413137"><a name="p246504413137"></a><a name="p246504413137"></a>解析输出格式，取值为 plaintext。</p>
    </td>
    </tr>
    <tr id="row17254145010126"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p225445020123"><a name="p225445020123"></a><a name="p225445020123"></a>pretty</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.06220622062206%" headers="mcps1.2.4.1.2 "><p id="p1025485020129"><a name="p1025485020129"></a><a name="p1025485020129"></a>boolean</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.69576957695769%" headers="mcps1.2.4.1.3 "><div class="p" id="p7905125312149"><a name="p7905125312149"></a><a name="p7905125312149"></a>当format为plaintext时，是否以优雅的格式展示：<a name="ul6896165111497"></a><a name="ul6896165111497"></a><ul id="ul6896165111497"><li>true表示通过“\n”分隔事。</li><li>false表示通过“，”分隔事件。</li></ul>
    </div>
    </td>
    </tr>
    </tbody>
    </table>

-   get\_prepared\_pending\_xid

    描述：当恢复完成时，返回nextxid。

    参数：nan

    返回值类型：text

-   pg\_clean\_region\_info

    描述：清理regionmap。

    参数：nan

    返回值类型：character varying

-   pg\_get\_delta\_info

    描述：从单个dn获取delta info。

    参数：rel text, schema\_name text

    返回值类型：part\_name text, live\_tuple bigint, data\_size bigint, blocknum bigint

-   pg\_get\_replication\_slot\_name

    描述：获取slot name。

    参数：nan

    返回值类型：text

-   pg\_get\_running\_xacts

    描述：获取运行中的xact。

    参数：nan

    返回值类型：handle integer, gxid xid, state tinyint, node text, xmin xid, vacuum boolean, timeline bigint, prepare\_xid xid, pid bigint, next\_xid xid

-   pg\_get\_variable\_info

    描述：获取共享内存变量cache。

    参数：nan

    返回值类型：node\_name text, nextOid oid, nextXid xid, oldestXid xid, xidVacLimit xid, oldestXidDB oid, lastExtendCSNLogpage xid, startExtendCSNLogpage xid, nextCommitSeqNo xid, latestCompletedXid xid, startupMaxXid xid

-   pg\_get\_xidlimit

    描述：从共享内存获取事物id信息。

    参数：nan

    返回值类型：nextXid xid, oldestXid xid, xidVacLimit xid, xidWarnLimit xid, xidStopLimit xid, xidWrapLimit xid, oldestXidDB oid

-   get\_global\_user\_transaction\(\)

    描述：返回所有节点上各用户的事务相关信息。

    返回值类型：node\_name name, usename name, commit\_counter bigint, rollback\_counter bigint, resp\_min bigint, resp\_max bigint, resp\_avg bigint, resp\_total bigint, bg\_commit\_counter bigint, bg\_rollback\_counter bigint, bg\_resp\_min bigint, bg\_resp\_max bigint, bg\_resp\_avg bigint, bg\_resp\_total bigint

-   pg\_collation\_for

    描述：返回入参字符串对应的排序规则。

    参数：any（如果是常量必须进行显式类型转换）

    返回值类型：text

-   pgxc\_unlock\_for\_sp\_database\(name Name\)

    描述：释放指定数据库锁。

    参数：数据库名

    返回值类型：布尔

-   pgxc\_lock\_for\_sp\_database\(name Name\)

    描述：对指定的数据库加锁。

    参数：数据库名

    返回值类型：布尔

-   copy\_error\_log\_create\(\)

    描述：创建COPY FROM容错机制所需要的错误表（public.pgxc\_copy\_error\_log）。

    返回值类型：Boolean

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >
    >-   此函数会尝试创建public.pgxc\_copy\_error\_log表，表的详细信息请参见[表7](#table138318280213)。
    >-   在relname列上创建B-tree索引，并REVOKE ALL on public.pgxc\_copy\_error\_log FROM public对错误表进行权限控制（与COPY语句权限一致）。
    >-   由于尝试创建的public.pgxc\_copy\_error\_log定义是一张行存表，因此数据库实例上必须支持行存表的创建才能够正常运行此函数，并使用后续的COPY容错功能。需要特别注意的是，enable\_hadoop\_env这个GUC参数开启后会禁止在数据库实例内创建行存表（openGauss默认为off）。
    >-   此函数自身权限为Sysadmin及以上（与错误表、COPY权限一致）。
    >-   若创建前public.pgxc\_copy\_error\_log表已存在或者copy\_error\_log\_relname\_idx索引已存在，则此函数会报错回滚。

    **表 7**  错误表public.pgxc\_copy\_error\_log信息

    <a name="table138318280213"></a>
    <table><thead align="left"><tr id="row48415282214"><th class="cellrowborder" valign="top" width="22.31223122312231%" id="mcps1.2.4.1.1"><p id="p084142817211"><a name="p084142817211"></a><a name="p084142817211"></a>列名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="28.992899289928992%" id="mcps1.2.4.1.2"><p id="p198410281525"><a name="p198410281525"></a><a name="p198410281525"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="48.6948694869487%" id="mcps1.2.4.1.3"><p id="p08411281214"><a name="p08411281214"></a><a name="p08411281214"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row65469159815"><td class="cellrowborder" valign="top" width="22.31223122312231%" headers="mcps1.2.4.1.1 "><p id="p195466152819"><a name="p195466152819"></a><a name="p195466152819"></a>relname</p>
    </td>
    <td class="cellrowborder" valign="top" width="28.992899289928992%" headers="mcps1.2.4.1.2 "><p id="p165477151182"><a name="p165477151182"></a><a name="p165477151182"></a>character varying</p>
    </td>
    <td class="cellrowborder" valign="top" width="48.6948694869487%" headers="mcps1.2.4.1.3 "><p id="p3547141514816"><a name="p3547141514816"></a><a name="p3547141514816"></a>表名称。以模式名.表名形式显示。</p>
    </td>
    </tr>
    <tr id="row984112817210"><td class="cellrowborder" valign="top" width="22.31223122312231%" headers="mcps1.2.4.1.1 "><p id="p1882414211083"><a name="p1882414211083"></a><a name="p1882414211083"></a>begintime</p>
    </td>
    <td class="cellrowborder" valign="top" width="28.992899289928992%" headers="mcps1.2.4.1.2 "><p id="p1082562116817"><a name="p1082562116817"></a><a name="p1082562116817"></a>timestamp with time zone</p>
    </td>
    <td class="cellrowborder" valign="top" width="48.6948694869487%" headers="mcps1.2.4.1.3 "><p id="p17825921686"><a name="p17825921686"></a><a name="p17825921686"></a>出现数据格式错误的时间。</p>
    </td>
    </tr>
    <tr id="row148502818216"><td class="cellrowborder" valign="top" width="22.31223122312231%" headers="mcps1.2.4.1.1 "><p id="p1935720521277"><a name="p1935720521277"></a><a name="p1935720521277"></a>filename</p>
    </td>
    <td class="cellrowborder" valign="top" width="28.992899289928992%" headers="mcps1.2.4.1.2 "><p id="p1535785215711"><a name="p1535785215711"></a><a name="p1535785215711"></a>character varying</p>
    </td>
    <td class="cellrowborder" valign="top" width="48.6948694869487%" headers="mcps1.2.4.1.3 "><p id="p10357155215713"><a name="p10357155215713"></a><a name="p10357155215713"></a>出现数据格式错误的数据源文件名。</p>
    </td>
    </tr>
    <tr id="row1418810441476"><td class="cellrowborder" valign="top" width="22.31223122312231%" headers="mcps1.2.4.1.1 "><p id="p2035812521178"><a name="p2035812521178"></a><a name="p2035812521178"></a>lineno</p>
    </td>
    <td class="cellrowborder" valign="top" width="28.992899289928992%" headers="mcps1.2.4.1.2 "><p id="p12358205220716"><a name="p12358205220716"></a><a name="p12358205220716"></a>bigint</p>
    </td>
    <td class="cellrowborder" valign="top" width="48.6948694869487%" headers="mcps1.2.4.1.3 "><p id="p2358105218712"><a name="p2358105218712"></a><a name="p2358105218712"></a>在数据源文件中，出现数据格式错误的行号。</p>
    </td>
    </tr>
    <tr id="row181905441873"><td class="cellrowborder" valign="top" width="22.31223122312231%" headers="mcps1.2.4.1.1 "><p id="p6358185215718"><a name="p6358185215718"></a><a name="p6358185215718"></a>rawrecord</p>
    </td>
    <td class="cellrowborder" valign="top" width="28.992899289928992%" headers="mcps1.2.4.1.2 "><p id="p153583521175"><a name="p153583521175"></a><a name="p153583521175"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="48.6948694869487%" headers="mcps1.2.4.1.3 "><p id="p1135810527714"><a name="p1135810527714"></a><a name="p1135810527714"></a>在数据源文件中，出现数据格式错误的原始记录。</p>
    </td>
    </tr>
    <tr id="row1487854919720"><td class="cellrowborder" valign="top" width="22.31223122312231%" headers="mcps1.2.4.1.1 "><p id="p9359145212719"><a name="p9359145212719"></a><a name="p9359145212719"></a>detail</p>
    </td>
    <td class="cellrowborder" valign="top" width="28.992899289928992%" headers="mcps1.2.4.1.2 "><p id="p83592521276"><a name="p83592521276"></a><a name="p83592521276"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="48.6948694869487%" headers="mcps1.2.4.1.3 "><p id="p20359105219717"><a name="p20359105219717"></a><a name="p20359105219717"></a>详细错误信息。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   dynamic\_func\_control\(scope text, function\_name text, action text, "\{params\}" text\[\]\)

    描述：动态开启内置的功能，当前仅支持动态开启全量SQL。

    返回值类型：record

    **表 8**  dynamic\_func\_control参数说明

    <a name="table125341781558"></a>
    <table><thead align="left"><tr id="row155342813517"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p95341581056"><a name="p95341581056"></a><a name="p95341581056"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.5015501550155%" id="mcps1.2.4.1.2"><p id="p353418813517"><a name="p353418813517"></a><a name="p353418813517"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="64.25642564256425%" id="mcps1.2.4.1.3"><p id="p153458554"><a name="p153458554"></a><a name="p153458554"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row7534988517"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p85341584512"><a name="p85341584512"></a><a name="p85341584512"></a>scope</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.5015501550155%" headers="mcps1.2.4.1.2 "><p id="p165341818512"><a name="p165341818512"></a><a name="p165341818512"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.25642564256425%" headers="mcps1.2.4.1.3 "><p id="p753417817519"><a name="p753417817519"></a><a name="p753417817519"></a>动态开启功能的范围，当前仅支持'LOCAL'。</p>
    </td>
    </tr>
    <tr id="row18535158955"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p0535081456"><a name="p0535081456"></a><a name="p0535081456"></a>function_name</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.5015501550155%" headers="mcps1.2.4.1.2 "><p id="p9535198953"><a name="p9535198953"></a><a name="p9535198953"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.25642564256425%" headers="mcps1.2.4.1.3 "><p id="p20535581955"><a name="p20535581955"></a><a name="p20535581955"></a>功能的名称，当前仅支持'STMT'。</p>
    </td>
    </tr>
    <tr id="row154618521052"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p175461521151"><a name="p175461521151"></a><a name="p175461521151"></a>action</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.5015501550155%" headers="mcps1.2.4.1.2 "><p id="p75468520511"><a name="p75468520511"></a><a name="p75468520511"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.25642564256425%" headers="mcps1.2.4.1.3 "><div class="p" id="p4744161918417"><a name="p4744161918417"></a><a name="p4744161918417"></a>当function_name为'STMT'时，action仅支持TRACK/UNTRACK/LIST/CLEAN：<a name="ul593172715418"></a><a name="ul593172715418"></a><ul id="ul593172715418"><li>TRACK - 开始记录归一化SQL的全量SQL信息。</li><li>UNTRACK - 取消记录归一化SQL的全量SQL信息。</li><li>LIST - 列取当前TRACK的归一化SQL的信息。</li><li>CLEAN - 清理记录当前归一化SQL的信息。</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row12619611267"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p861912119616"><a name="p861912119616"></a><a name="p861912119616"></a>params</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.5015501550155%" headers="mcps1.2.4.1.2 "><p id="p146191711565"><a name="p146191711565"></a><a name="p146191711565"></a>text[]</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.25642564256425%" headers="mcps1.2.4.1.3 "><div class="p" id="p321410421244"><a name="p321410421244"></a><a name="p321410421244"></a>当function_name为'STMT'时，对应不同的action时，对应的params设置如下：<a name="ul3553174512415"></a><a name="ul3553174512415"></a><ul id="ul3553174512415"><li>TRACK - '{"归一化SQLID", "L0/L1/L2"}'</li><li>UNTRACK - '{"归一化SQLID"}'</li><li>LIST - '{}'</li><li>CLEAN - '{}'</li></ul>
    </div>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_parse\_page\_bypath\(path text, blocknum bigint, relation\_type text, read\_memory boolean\)

    描述：用于解析指定表页面，并返回存放解析内容的路径。

    返回值类型：text

    备注：必须是系统管理员或运维管理员才能执行此函数。

    **表 9**  gs\_parse\_page\_bypath参数说明

    <a name="table127501424144518"></a>
    <table><thead align="left"><tr id="row15750624184510"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p19751132419458"><a name="p19751132419458"></a><a name="p19751132419458"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.48154815481548%" id="mcps1.2.4.1.2"><p id="p11751324124511"><a name="p11751324124511"></a><a name="p11751324124511"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="64.27642764276428%" id="mcps1.2.4.1.3"><p id="p17751102494511"><a name="p17751102494511"></a><a name="p17751102494511"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row107519241451"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p975110242458"><a name="p975110242458"></a><a name="p975110242458"></a>path</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p67511524104517"><a name="p67511524104517"></a><a name="p67511524104517"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul1513413587229"></a><a name="ul1513413587229"></a><ul id="ul1513413587229"><li>对于普通表或段页式表，相对路径为：tablespace name/database oid/表的relfilenode(物理文件名)。例如：base/16603/16394。</li><li>表文件的相对路径可以通过pg_relation_filepath(table_name text)查找。</li><li>合法的path格式列举：<a name="ul6101510191412"></a><a name="ul6101510191412"></a><ul id="ul6101510191412"><li>global/relNode</li><li>base/dbNode/relNode</li><li>pg_tblspc/spcNode/version_dir/dbNode/relNode</li></ul>
    </li></ul>
    </td>
    </tr>
    <tr id="row075117243452"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p177511124114511"><a name="p177511124114511"></a><a name="p177511124114511"></a>blocknum</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p17511824124519"><a name="p17511824124519"></a><a name="p17511824124519"></a>bigint</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul14851174272113"></a><a name="ul14851174272113"></a><ul id="ul14851174272113"><li>-1                                  所有block的信息</li><li>0- MaxBlockNumber    对应block的信息</li></ul>
    </td>
    </tr>
    <tr id="row5751102415451"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p275152454511"><a name="p275152454511"></a><a name="p275152454511"></a>relation_type</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p175111246453"><a name="p175111246453"></a><a name="p175111246453"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul959582318182"></a><a name="ul959582318182"></a><ul id="ul959582318182"><li>heap(astore 表)</li><li>uheap(ustore 表)</li><li>btree_index(BTree 索引)</li><li>ubtree_index(UBTree 索引)</li><li>segment(段页式)</li></ul>
    </td>
    </tr>
    <tr id="row87521824164510"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p275214248458"><a name="p275214248458"></a><a name="p275214248458"></a>read_memory</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p8752624164513"><a name="p8752624164513"></a><a name="p8752624164513"></a>boolean</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul490694355512"></a><a name="ul490694355512"></a><ul id="ul490694355512"><li>false，从磁盘文件解析。</li><li>true，首先尝试从共享缓冲区中解析该页面；如果共享缓冲区中不存在，则从磁盘文件解析。</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_xlogdump\_lsn\(start\_lsn text, end\_lsn text\)

    描述：用于解析指定lsn范围之内的XLOG日志，并返回存放解析内容的路径。可以通过pg\_current\_xlog\_location\(\)获取当前XLOG位置。

    返回值类型：text

    参数：LSN起始位置，LSN结束位置

    备注：必须是系统管理员或运维管理员才能执行此函数。

-   gs\_xlogdump\_xid\(c\_xid xid\)

    描述：用于解析指定xid的XLOG日志，并返回存放解析内容的路径。可以通过txid\_current\(\)获取当前事务ID。

    参数：事务ID

    返回值类型：text

    备注：必须是系统管理员或运维管理员才能执行此函数。

-   gs\_xlogdump\_tablepath\(path text, blocknum bigint, relation\_type text\)

    描述：用于解析指定表页面对应的日志，并返回存放解析内容的路径。

    返回值类型：text

    备注：必须是系统管理员或运维管理员才能执行此函数。

    **表 10**  gs\_xlogdump\_tablepath参数说明

    <a name="table12160121692320"></a>
    <table><thead align="left"><tr id="row11158111612236"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p615861612232"><a name="p615861612232"></a><a name="p615861612232"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.48154815481548%" id="mcps1.2.4.1.2"><p id="p1115871652311"><a name="p1115871652311"></a><a name="p1115871652311"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="64.27642764276428%" id="mcps1.2.4.1.3"><p id="p815818168231"><a name="p815818168231"></a><a name="p815818168231"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row10159141682317"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p1015815166233"><a name="p1015815166233"></a><a name="p1015815166233"></a>path</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p101581816182310"><a name="p101581816182310"></a><a name="p101581816182310"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul1615991612239"></a><a name="ul1615991612239"></a><ul id="ul1615991612239"><li>对于普通表或段页式表，相对路径为：tablespace name/database oid/表的relfilenode(物理文件名)。例如：base/16603/16394。</li><li>表文件的相对路径可以通过pg_relation_filepath(table_name text)查找。</li><li>合法的path格式列举：<a name="ul4520122418471"></a><a name="ul4520122418471"></a><ul id="ul4520122418471"><li>global/relNode</li><li>base/dbNode/relNode</li><li>pg_tblspc/spcNode/version_dir/dbNode/relNode</li></ul>
    </li></ul>
    </td>
    </tr>
    <tr id="row1415941613231"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p181591616162317"><a name="p181591616162317"></a><a name="p181591616162317"></a>blocknum</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p415912163235"><a name="p415912163235"></a><a name="p415912163235"></a>bigint</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul17159216172315"></a><a name="ul17159216172315"></a><ul id="ul17159216172315"><li>-1                                  所有block的信息</li><li>0- MaxBlockNumber    对应block的信息</li></ul>
    </td>
    </tr>
    <tr id="row1716011619233"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p1515901618232"><a name="p1515901618232"></a><a name="p1515901618232"></a>relation_type</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p91590168233"><a name="p91590168233"></a><a name="p91590168233"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul191591316112310"></a><a name="ul191591316112310"></a><ul id="ul191591316112310"><li>heap(astore 表)</li><li>uheap(ustore 表)</li><li>btree_index(BTree 索引)</li><li>ubtree_index(UBTree 索引)</li><li>segment(段页式)</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_xlogdump\_parsepage\_tablepath\(path text, blocknum bigint, relation\_type text, read\_memory boolean\)

    描述：用于解析指定表页面和表页面对应的日志，并返回存放解析内容的路径。可以看做一次执行gs\_parse\_page\_bypath和gs\_xlogdump\_tablepath。该函数执行的前置条件是表文件存在。如果想查看已删除的表的相关日志，请直接调用gs\_xlogdump\_tablepath。

    返回值类型：text

    备注：必须是系统管理员或运维管理员才能执行此函数。

    **表 11**  gs\_xlogdump\_parsepage\_tablepath参数说明

    <a name="table1115193952317"></a>
    <table><thead align="left"><tr id="row16138398236"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p01363919239"><a name="p01363919239"></a><a name="p01363919239"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.48154815481548%" id="mcps1.2.4.1.2"><p id="p913193972316"><a name="p913193972316"></a><a name="p913193972316"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="64.27642764276428%" id="mcps1.2.4.1.3"><p id="p6131339162314"><a name="p6131339162314"></a><a name="p6131339162314"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row15137391238"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p71313922317"><a name="p71313922317"></a><a name="p71313922317"></a>path</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p151311391235"><a name="p151311391235"></a><a name="p151311391235"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul9131039182315"></a><a name="ul9131039182315"></a><ul id="ul9131039182315"><li>对于普通表或段页式表，相对路径为：tablespace name/database oid/表的relfilenode(物理文件名)；例如：base/16603/16394</li><li>表文件的相对路径可以通过pg_relation_filepath(table_name text)查找。</li><li>合法的path格式列举：<a name="ul0359831124719"></a><a name="ul0359831124719"></a><ul id="ul0359831124719"><li>global/relNode</li><li>base/dbNode/relNode</li><li>pg_tblspc/spcNode/version_dir/dbNode/relNode</li></ul>
    </li></ul>
    </td>
    </tr>
    <tr id="row191463962314"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p161443912320"><a name="p161443912320"></a><a name="p161443912320"></a>blocknum</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p0144395233"><a name="p0144395233"></a><a name="p0144395233"></a>bigint</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul81453912318"></a><a name="ul81453912318"></a><ul id="ul81453912318"><li>-1                                  所有block的信息</li><li>0- MaxBlockNumber    对应block的信息</li></ul>
    </td>
    </tr>
    <tr id="row314173922310"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p161403962319"><a name="p161403962319"></a><a name="p161403962319"></a>relation_type</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p11473962314"><a name="p11473962314"></a><a name="p11473962314"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul1714539122310"></a><a name="ul1714539122310"></a><ul id="ul1714539122310"><li>heap(astore 表)</li><li>uheap(ustore 表)</li><li>btree_index(BTree 索引)</li><li>ubtree_index(UBTree 索引)</li><li>segment(段页式)</li></ul>
    </td>
    </tr>
    <tr id="row1515103902320"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p3151139192318"><a name="p3151139192318"></a><a name="p3151139192318"></a>read_memory</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p171543992320"><a name="p171543992320"></a><a name="p171543992320"></a>boolean</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul101523982314"></a><a name="ul101523982314"></a><ul id="ul101523982314"><li>false，从磁盘文件解析</li><li>true，首先尝试从共享缓冲区中解析该页面；如果共享缓冲区中不存在，则从磁盘文件解析</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_index\_verify\(Oid oid, uint32:wq blkno\)

    描述：用于校验UBtree索引页面或者索引树上key的顺序是否正确。

    返回值类型：record

    **表 12**  gs\_index\_verify参数说明

    <a name="table20495851424"></a>
    <table><thead align="left"><tr id="row94951557218"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p9495951125"><a name="p9495951125"></a><a name="p9495951125"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.48154815481548%" id="mcps1.2.4.1.2"><p id="p94951651126"><a name="p94951651126"></a><a name="p94951651126"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="64.27642764276428%" id="mcps1.2.4.1.3"><p id="p449516514219"><a name="p449516514219"></a><a name="p449516514219"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row649613518218"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p449610515215"><a name="p449610515215"></a><a name="p449610515215"></a>oid</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p16496751123"><a name="p16496751123"></a><a name="p16496751123"></a>Oid</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul10496951120"></a><a name="ul10496951120"></a><ul id="ul10496951120"><li>索引文件relfilenode,可以通过select relfilenode from pg_class where relname='name'查询，其中name表示对应的索引文件名字。</li></ul>
    </td>
    </tr>
    <tr id="row44968519214"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p12738153011817"><a name="p12738153011817"></a><a name="p12738153011817"></a>blkno</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p1947519492819"><a name="p1947519492819"></a><a name="p1947519492819"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul149611518215"></a><a name="ul149611518215"></a><ul id="ul149611518215"><li>0 ，表示检验整个索引树上所有页面。</li><li>大于0，表示校验页面编码等于blkno的索引页面。</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_index\_recycle\_queue\(Oid oid, int type, uint32 blkno\)

    描述：用于解析UBtree索引回收队列信息。

    返回值类型：record

    **表 13**  gs\_index\_recycle\_queue参数说明

    <a name="table121161030171216"></a>
    <table><thead align="left"><tr id="row11171230191211"><th class="cellrowborder" valign="top" width="20.242024202420243%" id="mcps1.2.4.1.1"><p id="p1211715307125"><a name="p1211715307125"></a><a name="p1211715307125"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.48154815481548%" id="mcps1.2.4.1.2"><p id="p3117430171212"><a name="p3117430171212"></a><a name="p3117430171212"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="64.27642764276428%" id="mcps1.2.4.1.3"><p id="p121171308125"><a name="p121171308125"></a><a name="p121171308125"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row18117230171215"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p19117203014124"><a name="p19117203014124"></a><a name="p19117203014124"></a>oid</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p81171930171213"><a name="p81171930171213"></a><a name="p81171930171213"></a>Oid</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul1117143019121"></a><a name="ul1117143019121"></a><ul id="ul1117143019121"><li>索引文件relfilenode,可以通过select relfilenode from pg_class where relname='name'查询，其中name表示对应的索引文件名字。</li></ul>
    </td>
    </tr>
    <tr id="row8261134191611"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p16261247165"><a name="p16261247165"></a><a name="p16261247165"></a>type</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p026234191615"><a name="p026234191615"></a><a name="p026234191615"></a>int</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul1455571701615"></a><a name="ul1455571701615"></a><ul id="ul1455571701615"><li>0，表示解析整个待回收队列。</li><li>1，表示解析整个空页队列。</li><li>2，表示解析单个页面。</li></ul>
    </td>
    </tr>
    <tr id="row111793051217"><td class="cellrowborder" valign="top" width="20.242024202420243%" headers="mcps1.2.4.1.1 "><p id="p3117203001211"><a name="p3117203001211"></a><a name="p3117203001211"></a>blkno</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.48154815481548%" headers="mcps1.2.4.1.2 "><p id="p13117163051218"><a name="p13117163051218"></a><a name="p13117163051218"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="64.27642764276428%" headers="mcps1.2.4.1.3 "><a name="ul18118153014128"></a><a name="ul18118153014128"></a><ul id="ul18118153014128"><li>回收队列页面编号，该参数只有在type=2的时候有效，blkno有效取值范围为1~4294967294。</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_stat\_wal\_entrytable\(int64 idx\)

    描述：用于输出xlog中预写日志插入状态表的内容。

    返回值类型：record

    **表 14**  gs\_stat\_wal\_entrytable参数说明

    <a name="table4929155865119"></a>
    <table><thead align="left"><tr id="row13930125855114"><th class="cellrowborder" valign="top" width="10.05%" id="mcps1.2.5.1.1"><p id="p1066133922413"><a name="p1066133922413"></a><a name="p1066133922413"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="16.189999999999998%" id="mcps1.2.5.1.2"><p id="p193010585511"><a name="p193010585511"></a><a name="p193010585511"></a>参数名</p>
    </th>
    <th class="cellrowborder" valign="top" width="14.32%" id="mcps1.2.5.1.3"><p id="p093095865118"><a name="p093095865118"></a><a name="p093095865118"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="59.440000000000005%" id="mcps1.2.5.1.4"><p id="p139301758195119"><a name="p139301758195119"></a><a name="p139301758195119"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1293055855111"><td class="cellrowborder" valign="top" width="10.05%" headers="mcps1.2.5.1.1 "><p id="p116611939192414"><a name="p116611939192414"></a><a name="p116611939192414"></a>输入参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.189999999999998%" headers="mcps1.2.5.1.2 "><p id="p19930165811519"><a name="p19930165811519"></a><a name="p19930165811519"></a>idx</p>
    </td>
    <td class="cellrowborder" valign="top" width="14.32%" headers="mcps1.2.5.1.3 "><p id="p3930858115120"><a name="p3930858115120"></a><a name="p3930858115120"></a>int64</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.440000000000005%" headers="mcps1.2.5.1.4 "><a name="ul69301258105116"></a><a name="ul69301258105116"></a><ul id="ul69301258105116"><li>-1：查询数组所有元素。</li><li>0-最大值：具体某个数组元素内容。</li></ul>
    </td>
    </tr>
    <tr id="row8748191322515"><td class="cellrowborder" valign="top" width="10.05%" headers="mcps1.2.5.1.1 "><p id="p177491413152510"><a name="p177491413152510"></a><a name="p177491413152510"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.189999999999998%" headers="mcps1.2.5.1.2 "><p id="p187491113182511"><a name="p187491113182511"></a><a name="p187491113182511"></a>idx</p>
    </td>
    <td class="cellrowborder" valign="top" width="14.32%" headers="mcps1.2.5.1.3 "><p id="p9749613102517"><a name="p9749613102517"></a><a name="p9749613102517"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.440000000000005%" headers="mcps1.2.5.1.4 "><p id="p374971312518"><a name="p374971312518"></a><a name="p374971312518"></a>记录对应数组中的下标。</p>
    </td>
    </tr>
    <tr id="row1732619109252"><td class="cellrowborder" valign="top" width="10.05%" headers="mcps1.2.5.1.1 "><p id="p19327171022512"><a name="p19327171022512"></a><a name="p19327171022512"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.189999999999998%" headers="mcps1.2.5.1.2 "><p id="p15327131013259"><a name="p15327131013259"></a><a name="p15327131013259"></a>endlsn</p>
    </td>
    <td class="cellrowborder" valign="top" width="14.32%" headers="mcps1.2.5.1.3 "><p id="p1332711062511"><a name="p1332711062511"></a><a name="p1332711062511"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.440000000000005%" headers="mcps1.2.5.1.4 "><p id="p1532721018256"><a name="p1532721018256"></a><a name="p1532721018256"></a>记录的LSN标签。</p>
    </td>
    </tr>
    <tr id="row1782363132510"><td class="cellrowborder" valign="top" width="10.05%" headers="mcps1.2.5.1.1 "><p id="p16823932259"><a name="p16823932259"></a><a name="p16823932259"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.189999999999998%" headers="mcps1.2.5.1.2 "><p id="p4823113182517"><a name="p4823113182517"></a><a name="p4823113182517"></a>lrc</p>
    </td>
    <td class="cellrowborder" valign="top" width="14.32%" headers="mcps1.2.5.1.3 "><p id="p1782317372515"><a name="p1782317372515"></a><a name="p1782317372515"></a>int32</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.440000000000005%" headers="mcps1.2.5.1.4 "><p id="p118231435256"><a name="p118231435256"></a><a name="p118231435256"></a>记录对应的LRC。</p>
    </td>
    </tr>
    <tr id="row156126595241"><td class="cellrowborder" valign="top" width="10.05%" headers="mcps1.2.5.1.1 "><p id="p10613659172410"><a name="p10613659172410"></a><a name="p10613659172410"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.189999999999998%" headers="mcps1.2.5.1.2 "><p id="p66131659132416"><a name="p66131659132416"></a><a name="p66131659132416"></a>status</p>
    </td>
    <td class="cellrowborder" valign="top" width="14.32%" headers="mcps1.2.5.1.3 "><p id="p66131859182419"><a name="p66131859182419"></a><a name="p66131859182419"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="59.440000000000005%" headers="mcps1.2.5.1.4 "><p id="p17613155914249"><a name="p17613155914249"></a><a name="p17613155914249"></a>标识当前entry对应的xlog是否已经完全拷贝到wal buffer中：</p>
    <a name="ul132586129272"></a><a name="ul132586129272"></a><ul id="ul132586129272"><li>0：非COPIED</li><li>1：COPIED</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_walwriter\_flush\_position\(\)

    描述：输出预写日志的刷新位置。

    返回值类型：record

    **表 15**  gs\_walwriter\_flush\_position参数说明

    <a name="table188124399287"></a>
    <table><thead align="left"><tr id="row14812239122817"><th class="cellrowborder" valign="top" width="10.65%" id="mcps1.2.5.1.1"><p id="p17812739152811"><a name="p17812739152811"></a><a name="p17812739152811"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="24.73%" id="mcps1.2.5.1.2"><p id="p28121139102813"><a name="p28121139102813"></a><a name="p28121139102813"></a>参数名</p>
    </th>
    <th class="cellrowborder" valign="top" width="8.37%" id="mcps1.2.5.1.3"><p id="p681243915288"><a name="p681243915288"></a><a name="p681243915288"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="56.25%" id="mcps1.2.5.1.4"><p id="p108121339172819"><a name="p108121339172819"></a><a name="p108121339172819"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row158121439162810"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p16812143919282"><a name="p16812143919282"></a><a name="p16812143919282"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p1881233920283"><a name="p1881233920283"></a><a name="p1881233920283"></a>last_flush_status_entry</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p19812193913288"><a name="p19812193913288"></a><a name="p19812193913288"></a>int32</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p10812739152817"><a name="p10812739152817"></a><a name="p10812739152817"></a>Xlog flush上一个刷盘的tblEntry下标索引。</p>
    </td>
    </tr>
    <tr id="row3812143972819"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p12812939192816"><a name="p12812939192816"></a><a name="p12812939192816"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p78131939172810"><a name="p78131939172810"></a><a name="p78131939172810"></a>last_scanned_lrc</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p178138393288"><a name="p178138393288"></a><a name="p178138393288"></a>int32</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p781343982819"><a name="p781343982819"></a><a name="p781343982819"></a>Xlog flush上一次扫描到的最后一个tblEntry记录的LRC。</p>
    </td>
    </tr>
    <tr id="row781333915287"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p58138395283"><a name="p58138395283"></a><a name="p58138395283"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p08131039112813"><a name="p08131039112813"></a><a name="p08131039112813"></a>curr_lrc</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p1813183913283"><a name="p1813183913283"></a><a name="p1813183913283"></a>int32</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p6813739122816"><a name="p6813739122816"></a><a name="p6813739122816"></a>WALInsertStatusEntry状态表中LRC最新的使用情况，该LRC表示下一个Xlog记录写入时在WALInsertStatusEntry对应的LRC值。</p>
    </td>
    </tr>
    <tr id="row14813153910282"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p08131539132816"><a name="p08131539132816"></a><a name="p08131539132816"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p481323915288"><a name="p481323915288"></a><a name="p481323915288"></a>curr_byte_pos</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p181343932814"><a name="p181343932814"></a><a name="p181343932814"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p181318390288"><a name="p181318390288"></a><a name="p181318390288"></a>Xlog记录写入WAL文件，最新分配的位置，下一个xlog记录插入点。</p>
    </td>
    </tr>
    <tr id="row1781363922815"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p7813103942817"><a name="p7813103942817"></a><a name="p7813103942817"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p12813539152818"><a name="p12813539152818"></a><a name="p12813539152818"></a>prev_byte_size</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p1681383912817"><a name="p1681383912817"></a><a name="p1681383912817"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p7813193982818"><a name="p7813193982818"></a><a name="p7813193982818"></a>上一个xlog记录的长度。</p>
    </td>
    </tr>
    <tr id="row2081343982810"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p6813639132818"><a name="p6813639132818"></a><a name="p6813639132818"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p5813113972817"><a name="p5813113972817"></a><a name="p5813113972817"></a>flush_result</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p188131039152811"><a name="p188131039152811"></a><a name="p188131039152811"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p7813163932813"><a name="p7813163932813"></a><a name="p7813163932813"></a>当前全局xlog刷盘的位置。</p>
    </td>
    </tr>
    <tr id="row158131339182814"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p1381383911286"><a name="p1381383911286"></a><a name="p1381383911286"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p13813439142810"><a name="p13813439142810"></a><a name="p13813439142810"></a>send_result</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p0813639152812"><a name="p0813639152812"></a><a name="p0813639152812"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p38136394282"><a name="p38136394282"></a><a name="p38136394282"></a>当前主机上xlog发送位置。</p>
    </td>
    </tr>
    <tr id="row936316413307"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p8363104163014"><a name="p8363104163014"></a><a name="p8363104163014"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p8363174123014"><a name="p8363174123014"></a><a name="p8363174123014"></a>shm_rqst_write_pos</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p103631841309"><a name="p103631841309"></a><a name="p103631841309"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p0363545303"><a name="p0363545303"></a><a name="p0363545303"></a>共享内存中记录的XLogCtl中LogwrtRqst请求的write位置。</p>
    </td>
    </tr>
    <tr id="row186811717308"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p16693714309"><a name="p16693714309"></a><a name="p16693714309"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p1269772303"><a name="p1269772303"></a><a name="p1269772303"></a>shm_rqst_flush_pos</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p66919783018"><a name="p66919783018"></a><a name="p66919783018"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p116914716309"><a name="p116914716309"></a><a name="p116914716309"></a>共享内存中记录的XLogCtl中LogwrtRqst请求的flush位置。</p>
    </td>
    </tr>
    <tr id="row126629903011"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p66621914309"><a name="p66621914309"></a><a name="p66621914309"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p1066312915302"><a name="p1066312915302"></a><a name="p1066312915302"></a>shm_result_write_pos</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p206631594306"><a name="p206631594306"></a><a name="p206631594306"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p9663593304"><a name="p9663593304"></a><a name="p9663593304"></a>共享内存中记录的XLogCtl中LogwrtResult的write位置。</p>
    </td>
    </tr>
    <tr id="row184911712183012"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p9491512183012"><a name="p9491512183012"></a><a name="p9491512183012"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p1049151223019"><a name="p1049151223019"></a><a name="p1049151223019"></a>shm_result_flush_pos</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p1491161215306"><a name="p1491161215306"></a><a name="p1491161215306"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p749119128300"><a name="p749119128300"></a><a name="p749119128300"></a>共享内存中记录的XLogCtl中LogwrtResult的flush位置。</p>
    </td>
    </tr>
    <tr id="row266981543019"><td class="cellrowborder" valign="top" width="10.65%" headers="mcps1.2.5.1.1 "><p id="p366981515309"><a name="p366981515309"></a><a name="p366981515309"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="24.73%" headers="mcps1.2.5.1.2 "><p id="p1666951512304"><a name="p1666951512304"></a><a name="p1666951512304"></a>curr_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.37%" headers="mcps1.2.5.1.3 "><p id="p16691615193015"><a name="p16691615193015"></a><a name="p16691615193015"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="56.25%" headers="mcps1.2.5.1.4 "><p id="p186691815133011"><a name="p186691815133011"></a><a name="p186691815133011"></a>当前时间。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_walwriter\_flush\_stat\(int operation\)

    描述：用于统计预写日志write与sync的次数频率与数据量，以及xlog文件的信息。

    返回值类型：record

    **表 16**  gs\_walwriter\_flush\_stat参数说明

    <a name="table94501910135111"></a>
    <table><thead align="left"><tr id="row16450510165117"><th class="cellrowborder" valign="top" width="10.780000000000001%" id="mcps1.2.5.1.1"><p id="p17582743173512"><a name="p17582743173512"></a><a name="p17582743173512"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="29.299999999999997%" id="mcps1.2.5.1.2"><p id="p44504106513"><a name="p44504106513"></a><a name="p44504106513"></a>参数名</p>
    </th>
    <th class="cellrowborder" valign="top" width="8.4%" id="mcps1.2.5.1.3"><p id="p245141035114"><a name="p245141035114"></a><a name="p245141035114"></a>类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="51.519999999999996%" id="mcps1.2.5.1.4"><p id="p18451101013511"><a name="p18451101013511"></a><a name="p18451101013511"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row74511410125111"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p2582743193517"><a name="p2582743193517"></a><a name="p2582743193517"></a>输入参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p12451110145118"><a name="p12451110145118"></a><a name="p12451110145118"></a>operation</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p18451610125111"><a name="p18451610125111"></a><a name="p18451610125111"></a>int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><a name="ul34519108516"></a><a name="ul34519108516"></a><ul id="ul34519108516"><li>-1：关闭统计开关(默认状态为关闭)。</li><li>0：打开统计开关。</li><li>1：查询统计信息。</li><li>2：重置统计信息。</li></ul>
    </td>
    </tr>
    <tr id="row1370084120349"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p258215437359"><a name="p258215437359"></a><a name="p258215437359"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p9701641123416"><a name="p9701641123416"></a><a name="p9701641123416"></a>write_times</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p197013413343"><a name="p197013413343"></a><a name="p197013413343"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p6701124133412"><a name="p6701124133412"></a><a name="p6701124133412"></a>Xlog调用write接口的次数。</p>
    </td>
    </tr>
    <tr id="row17115174513413"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p458294316350"><a name="p458294316350"></a><a name="p458294316350"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p16115134518344"><a name="p16115134518344"></a><a name="p16115134518344"></a>sync_times</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p17115845133410"><a name="p17115845133410"></a><a name="p17115845133410"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p81161845113419"><a name="p81161845113419"></a><a name="p81161845113419"></a>Xlog调用sync接口次数。</p>
    </td>
    </tr>
    <tr id="row12596164614341"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p05821043123511"><a name="p05821043123511"></a><a name="p05821043123511"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p15596184610341"><a name="p15596184610341"></a><a name="p15596184610341"></a>total_xlog_sync_bytes</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p85961464349"><a name="p85961464349"></a><a name="p85961464349"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p1659616464343"><a name="p1659616464343"></a><a name="p1659616464343"></a>Backend线程请求写入xlog总量统计值。</p>
    </td>
    </tr>
    <tr id="row51821151193418"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p4582143143513"><a name="p4582143143513"></a><a name="p4582143143513"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p1918215514345"><a name="p1918215514345"></a><a name="p1918215514345"></a>total_actual_xlog_sync_bytes</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p31821051113418"><a name="p31821051113418"></a><a name="p31821051113418"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p1118213513346"><a name="p1118213513346"></a><a name="p1118213513346"></a>调用sync接口实际刷盘的xlog总量统计值。</p>
    </td>
    </tr>
    <tr id="row16553185433413"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p1958216432359"><a name="p1958216432359"></a><a name="p1958216432359"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p35531454193417"><a name="p35531454193417"></a><a name="p35531454193417"></a>avg_write_bytes</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p1155365417347"><a name="p1155365417347"></a><a name="p1155365417347"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p3553165463416"><a name="p3553165463416"></a><a name="p3553165463416"></a>每次调用XLogWrite接口请求写的xlog量。</p>
    </td>
    </tr>
    <tr id="row19477205753412"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p858284314358"><a name="p858284314358"></a><a name="p858284314358"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p34771457173412"><a name="p34771457173412"></a><a name="p34771457173412"></a>avg_actual_write_bytes</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p1347765713416"><a name="p1347765713416"></a><a name="p1347765713416"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p194771157153417"><a name="p194771157153417"></a><a name="p194771157153417"></a>实际每次调用write接口写的xlog量。</p>
    </td>
    </tr>
    <tr id="row5999135812340"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p4582124353511"><a name="p4582124353511"></a><a name="p4582124353511"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p499918585349"><a name="p499918585349"></a><a name="p499918585349"></a>avg_sync_bytes</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p159991458143410"><a name="p159991458143410"></a><a name="p159991458143410"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p59991558173410"><a name="p59991558173410"></a><a name="p59991558173410"></a>平均每次请求sync的xlog量。</p>
    </td>
    </tr>
    <tr id="row1384690133511"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p11582204323520"><a name="p11582204323520"></a><a name="p11582204323520"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p17847150193518"><a name="p17847150193518"></a><a name="p17847150193518"></a>avg_actual_sync_bytes</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p188473016353"><a name="p188473016353"></a><a name="p188473016353"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p98473010353"><a name="p98473010353"></a><a name="p98473010353"></a>实际每次调用sync刷盘xlog量。</p>
    </td>
    </tr>
    <tr id="row133461727103517"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p165821343103519"><a name="p165821343103519"></a><a name="p165821343103519"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p8347142763513"><a name="p8347142763513"></a><a name="p8347142763513"></a>total_write_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p1347192763517"><a name="p1347192763517"></a><a name="p1347192763517"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p1734722713515"><a name="p1734722713515"></a><a name="p1734722713515"></a>调用write操作总时间统计(单位：us)。</p>
    </td>
    </tr>
    <tr id="row9362162913358"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p13582154316352"><a name="p13582154316352"></a><a name="p13582154316352"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p3362122913357"><a name="p3362122913357"></a><a name="p3362122913357"></a>total_sync_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p5362192963518"><a name="p5362192963518"></a><a name="p5362192963518"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p17362152913513"><a name="p17362152913513"></a><a name="p17362152913513"></a>调用sync操作总时间统计(单位：us)。</p>
    </td>
    </tr>
    <tr id="row122773153511"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p958234319354"><a name="p958234319354"></a><a name="p958234319354"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p2227133113359"><a name="p2227133113359"></a><a name="p2227133113359"></a>avg_write_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p162271931183510"><a name="p162271931183510"></a><a name="p162271931183510"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p152271731163511"><a name="p152271731163511"></a><a name="p152271731163511"></a>每次调用write接口平均时间(单位：us)。</p>
    </td>
    </tr>
    <tr id="row8770143253519"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p1958234333518"><a name="p1958234333518"></a><a name="p1958234333518"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p17770143218356"><a name="p17770143218356"></a><a name="p17770143218356"></a>avg_sync_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p12770143253520"><a name="p12770143253520"></a><a name="p12770143253520"></a>uint32</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p107703320350"><a name="p107703320350"></a><a name="p107703320350"></a>每次调用sync接口平均时间(单位：us)。</p>
    </td>
    </tr>
    <tr id="row12733349357"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p1558215437357"><a name="p1558215437357"></a><a name="p1558215437357"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p1473143419355"><a name="p1473143419355"></a><a name="p1473143419355"></a>curr_init_xlog_segno</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p87318343352"><a name="p87318343352"></a><a name="p87318343352"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p27363453510"><a name="p27363453510"></a><a name="p27363453510"></a>当前最新创建的xlog段文件编号。</p>
    </td>
    </tr>
    <tr id="row1968163563515"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p258284310356"><a name="p258284310356"></a><a name="p258284310356"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p1868163543510"><a name="p1868163543510"></a><a name="p1868163543510"></a>curr_open_xlog_segno</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p66815354353"><a name="p66815354353"></a><a name="p66815354353"></a>uint64</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p1681535133518"><a name="p1681535133518"></a><a name="p1681535133518"></a>当前正在写的xlog段文件编号。</p>
    </td>
    </tr>
    <tr id="row1640433718355"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p1582443103514"><a name="p1582443103514"></a><a name="p1582443103514"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p1840493710353"><a name="p1840493710353"></a><a name="p1840493710353"></a>last_reset_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p184042376358"><a name="p184042376358"></a><a name="p184042376358"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p20404143783515"><a name="p20404143783515"></a><a name="p20404143783515"></a>上一次重置统计信息的时间。</p>
    </td>
    </tr>
    <tr id="row587343816354"><td class="cellrowborder" valign="top" width="10.780000000000001%" headers="mcps1.2.5.1.1 "><p id="p20582643103514"><a name="p20582643103514"></a><a name="p20582643103514"></a>输出参数</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.299999999999997%" headers="mcps1.2.5.1.2 "><p id="p38734388359"><a name="p38734388359"></a><a name="p38734388359"></a>curr_time</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.4%" headers="mcps1.2.5.1.3 "><p id="p7873133813357"><a name="p7873133813357"></a><a name="p7873133813357"></a>text</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.519999999999996%" headers="mcps1.2.5.1.4 "><p id="p19873183815351"><a name="p19873183815351"></a><a name="p19873183815351"></a>当前时间。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   gs\_comm\_proxy\_thread\_status\(\)

    描述：用于在数据库实例配置用户态网络的场景下，代理通信库comm\_proxy收发数据包统计。

    参数：nan

    返回值类型：record

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >
    >此函数的查询仅在集中式环境开始部署用户态网络，且comm\_proxy\_attr参数中enable\_dfx配置为true的条件下显示具体信息。其他场景报错不支持查询。

- pg\_ls\_tmpdir\(\)

  描述：返回默认表空间下临时目录（pgsql\_tmp）中每个文件的名称、大小和最后修改时间。

  参数：nan

  返回值类型：record

  备注：必须是系统管理员或者监控管理员才能执行此函数。

  <a name="table6565735517"></a>

  <table><tbody><tr id="row196328352111"><td class="cellrowborder" valign="top" width="25%"><p id="p1563223516118"><a name="p1563223516118"></a><a name="p1563223516118"></a>参数类型</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p96327357117"><a name="p96327357117"></a><a name="p96327357117"></a>参数名</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p5632183510113"><a name="p5632183510113"></a><a name="p5632183510113"></a>类型</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1163215358114"><a name="p1163215358114"></a><a name="p1163215358114"></a>描述</p>
  </td>
  </tr>
  <tr id="row156321435813"><td class="cellrowborder" valign="top" width="25%"><p id="p363213355114"><a name="p363213355114"></a><a name="p363213355114"></a>输出参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p563218357118"><a name="p563218357118"></a><a name="p563218357118"></a>name</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1632635119"><a name="p1632635119"></a><a name="p1632635119"></a>text</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1863214353113"><a name="p1863214353113"></a><a name="p1863214353113"></a>文件名称</p>
  </td>
  </tr>
  <tr id="row10632835316"><td class="cellrowborder" valign="top" width="25%"><p id="p96325358115"><a name="p96325358115"></a><a name="p96325358115"></a>输出参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p116321335612"><a name="p116321335612"></a><a name="p116321335612"></a>size</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1563215351018"><a name="p1563215351018"></a><a name="p1563215351018"></a>int8</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p2063219352018"><a name="p2063219352018"></a><a name="p2063219352018"></a>文件大小（单位：byte）</p>
  </td>
  </tr>
  <tr id="row1263218351217"><td class="cellrowborder" valign="top" width="25%"><p id="p1763253513111"><a name="p1763253513111"></a><a name="p1763253513111"></a>输出参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p156321035610"><a name="p156321035610"></a><a name="p156321035610"></a>modification</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p14632113513114"><a name="p14632113513114"></a><a name="p14632113513114"></a>timestamptz</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1863212351815"><a name="p1863212351815"></a><a name="p1863212351815"></a>文件最后修改时间</p>
  </td>
  </tr>
  </tbody>
  </table>

- pg\_ls\_tmpdir\(oid\)

  描述：返回指定表空间下临时目录（pgsql\_tmp）中每个文件的名称、大小和最后修改时间。

  参数：oid

  返回值类型：record

  备注：必须是系统管理员或者监控管理员才能执行此函数。

  <a name="table721162033013"></a>

  <table><tbody><tr id="row13208202304"><td class="cellrowborder" valign="top" width="25%"><p id="p13201320183015"><a name="p13201320183015"></a><a name="p13201320183015"></a>参数类型</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1220182011305"><a name="p1220182011305"></a><a name="p1220182011305"></a>参数名</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p16201220133013"><a name="p16201220133013"></a><a name="p16201220133013"></a>类型</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p142092018304"><a name="p142092018304"></a><a name="p142092018304"></a>描述</p>
  </td>
  </tr>
  <tr id="row1220192015304"><td class="cellrowborder" valign="top" width="25%"><p id="p1220920113012"><a name="p1220920113012"></a><a name="p1220920113012"></a>输入参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p17201420173015"><a name="p17201420173015"></a><a name="p17201420173015"></a>oid</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p420520183015"><a name="p420520183015"></a><a name="p420520183015"></a>oid</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p120122033014"><a name="p120122033014"></a><a name="p120122033014"></a>表空间id</p>
  </td>
  </tr>
  <tr id="row821172012304"><td class="cellrowborder" valign="top" width="25%"><p id="p420102012307"><a name="p420102012307"></a><a name="p420102012307"></a>输出参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p2020162020304"><a name="p2020162020304"></a><a name="p2020162020304"></a>name</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p1621182073018"><a name="p1621182073018"></a><a name="p1621182073018"></a>text</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p32112207302"><a name="p32112207302"></a><a name="p32112207302"></a>文件名称</p>
  </td>
  </tr>
  <tr id="row182162013302"><td class="cellrowborder" valign="top" width="25%"><p id="p421020103018"><a name="p421020103018"></a><a name="p421020103018"></a>输出参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p621720103010"><a name="p621720103010"></a><a name="p621720103010"></a>size</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p52112083012"><a name="p52112083012"></a><a name="p52112083012"></a>int8</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p621182053015"><a name="p621182053015"></a><a name="p621182053015"></a>文件大小（单位：byte）</p>
  </td>
  </tr>
  <tr id="row92152017306"><td class="cellrowborder" valign="top" width="25%"><p id="p121172010308"><a name="p121172010308"></a><a name="p121172010308"></a>输出参数</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p921102003013"><a name="p921102003013"></a><a name="p921102003013"></a>modification</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p82152017306"><a name="p82152017306"></a><a name="p82152017306"></a>timestamptz</p>
  </td>
  <td class="cellrowborder" valign="top" width="25%"><p id="p421172014303"><a name="p421172014303"></a><a name="p421172014303"></a>文件最后修改时间</p>
  </td>
  </tr>
  </tbody>
  </table>

- pg\_ls\_waldir\(\)

  描述：返回预写日志\(WAL\)目录中每个文件的名称、大小和最后修改时间。

  参数：nan

  返回值类型：record

  备注：必须是系统管理员或者监控管理员才能执行此函数。

 - GS\_WRITE\_TERM\_LOG(void)

   描述：写入一条日志记录数据库节点当前的term值。备节点返回false，主节点写入成功后返回true。

   返回值类型：Boolean

pg_prepared_statement()

  描述：查询当前会话的预备语句或者指定会话以及整个数据库实例的预备语句。

  输入参数：

  |      序号      |      入参       |      类型      |      描述                                                     |
  | ------------- | -------------- | -------------- | ------------------------------------------------------------ |
  | 1             | sessionid      | int64            | 取值范围：-9223372036854775808~9223372036854775807。  |

  返回字段：

  |      序号       |       返回字段            |      类型       |      描述                                                    |
  | -------------- | ------------------------ | -------------- | ------------------------------------------------------------ |
  | 1              | sessionid                | int64          | 会话的标识符。                                         |
  | 2              | username                 | text           | 会话所属用户。                                                   |
  | 3              | name                     | text           | 预备语句的标识符。                                                   |
  | 4              | statement                | text           | 创建该预备语句的查询字符串。对于从SQL创建的预备语句而言是客户端提交的PREPARE语句；对于通过前/后端协议创建的预备语句而言是预备语句自身的文本。                                          |
  | 5              | prepare_time             | timestamp with time zone    | 创建该预备语句的时间戳。                                               |
  | 6              | parameter_types          | regtype[]      | 该预备语句期望的参数类型，以regtype类型的数组格式出现。与该数组元素相对应的OID可以通过把regtype转换为oid值得到。                                               |
  | 7              | from_sql                 | boolean        | 如果该预备语句是通过PREPARE语句创建的则为true。 如果是通过前/后端协议创建的则为false。                          |

  >![](public_sys-resources/icon-note.png) **说明：**
  >
  > 1. pg_prepared_statement()函数允许不传入参数，当选择不传入参数时，是查询当前会话的预备语句，查询结果只返回"name","statement","prepare_time","parameter_types","from_sql"这五个字段。
  > 2. 当pg_prepared_statement()函数传入参数为0时，为查询整个数据库实例的预备语句。

  示例：
  ```sql
  select *from pg_prepared_statement();
  select *from pg_prepared_statement(0);
  select *from pg_prepared_statement(1);
  select *from pg_prepared_statement(281463436919152);
  ```

- gs_stat_walsender

  描述：统计 WalSender 发送WAL日志的平均时间间隔、发送次数等信息。支持开启、关闭、重置、查询。

  输入参数：

  |      序号      |      入参       |      类型      |      描述                                                     |
    | ------------- | -------------- | -------------- | ------------------------------------------------------------ |
  | 1             | operation      | int            | 取值范围：-1~2。 <ul> <li>-1：关闭统计功能；</li> <li>0：重置数据；</li> <li>1：开启统计功能；</li> <li>2：查询（默认）。</li> </ul> |

  返回字段：

  |      序号       |       返回字段            |      类型       |      描述                                                    |
    | -------------- | ------------------------ | -------------- | ------------------------------------------------------------ |
  | 1              | is_enable_stat           | boolean        | 是否开启，默认关闭。                                         |
  | 2              | channel                  | text           | 发送通道。                                                   |
  | 3              | cur_time                 | timestamptz    | 当前时间。                                                   |
  | 4              | send_times               | uint64         | 发送次数。                                                   |
  | 5              | first_send_time          | timestamptz    | 首次发送时间。                                               |
  | 6              | last_send_time           | timestamptz    | 末次发送时间。                                               |
  | 7              | last_reset_time          | timestamptz    | 末次重置时间，只有重置过才会有值。                           |
  | 8              | avg_send_interval        | uint64         | 平均发送间隔时间，发送次数大于等于2才会有值。<br>计算方式：(last_send_time - first_send_time) / (send_times - 1 ) |
  | 9              | since_last_send_interval | uint64         | 距离最近一次发送的时间，发送次数大于0才会有值。<br>计算方式：cur_time - last_send_time |

  >![](public_sys-resources/icon-note.png) **说明：**
  >
  > 1. 只有存在 WalSender 且已初始化完成才会有数据，WalSender终止则对应数据被移除，线程重新拉起不会继承。每个 WalSender 一行，单机场景不会有数据。在没有 WalSender 的情况下，开关、重置也会更新系统内部 is_enable_stat、last_reset_time 字段的值。
  > 2. channel 与 gs_ctl query 命令查询到的发送通道一致。
  > 3. since_last_send_interval 在 send_times 为 0 时返回 NULL 值，且由于此值为查询时实时计算的，统计功能关闭后依然是 cur_time - last_send_time，尽管 last_send_time 已不再更新。
  > 4. uint64 类型目前在系统内部实际被识别为 xid，即事务ID类型，在进行运算时需要注意。
  > 5. 数据库重启后所有数据回到初始化状态，功能默认关闭。

  示例：
  ```sql
  select * from gs_stat_walsender(1);
  select * from gs_stat_walsender(2);
  select * from gs_stat_walsender(0);
  select * from gs_stat_walsender(-1);
  ```

- gs_stat_walreceiver

  描述：统计 WalReceiver 唤醒 WalRecvWriter 的时间间隔、walReceiverBuffer 的当前大小和历史上满的次数。支持开启、关闭、重置、查询。

  输入参数：

  |      序号       |      入参       |      类型      |      描述                                                    |
    | -------------- | -------------- | -------------- | ------------------------------------------------------------ |
  | 1             | operation      | int            | 取值范围：-1~2。 <ul> <li>-1：关闭统计功能；</li> <li>0：重置数据；</li> <li>1：开启统计功能；</li> <li>2：查询（默认）。</li> </ul> |

  返回字段：

  |      序号      |      返回字段            |      类型      |      描述                                                    |
    | -------------- | ------------------------ | -------------- | ------------------------------------------------------------ |
  | 1              | is_enable_stat           | boolean        | 是否开启，默认关闭。                                         |
  | 2              | buffer_current_size      | uint64         | walReceiverBuffer当前已使用的缓存大小。                      |
  | 3              | buffer_full_times        | uint64         | 缓存被写满的次数。                                           |
  | 4              | wake_writer_times        | uint64         | 唤醒WalRecvWriter的次数。                                    |
  | 5              | avg_wake_interval        | uint64         | 平均唤醒时间间隔，唤醒次数大于等于2才会有值。<br>计算方式：（last_wake_time - first_wake_time）/ (wake_writer_times - 1)。 |
  | 6              | since_last_wake_interval | uint64         | 距离最近一次唤醒WalRecvWriter的时间。<br>计算方式：cur_time - last_wake_time。 |
  | 7              | first_wake_time          | timestamptz    | 首次唤醒时间。                                               |
  | 8              | last_wake_time           | timestamptz    | 末次唤醒时间。                                               |
  | 9              | last_reset_time          | timestamptz    | 末次重置时间，只有重置过才会有值。                           |
  | 10             | cur_time                 | timestamptz    | 当前时间。                                                   |

  >![](public_sys-resources/icon-note.png) **说明：**
  >
  > 1. avg_wake_interval 在 wake_writer_times 小于 2 时返回 NULL 值。
  > 2. since_last_wake_interval 在 wake_writer_times 为 0 时返回 NULL 值，且由于此值为查询时实时计算的，统计功能关闭后依然是 cur_time - last_wake_time，尽管 last_wake_time 已不再更新。
  > 3. first_wake_time、last_wake_time、last_reset_time 在没有值时返回 NULL。
  > 4. uint64 类型目前在系统内部实际被识别为 xid，即事务ID类型，在进行运算时需要注意。
  > 5. 数据库重启后所有数据回到初始化状态，功能默认关闭。

  示例：
  ```sql
  select * from gs_stat_walreceiver(1);
  select * from gs_stat_walreceiver(2);
  select * from gs_stat_walreceiver(0);
  select * from gs_stat_walreceiver(-1);
  ```


- gs_stat_walrecvwriter

  描述：统计 WalRecvWriter 线程写日志 I/O发生的次数、耗时、数据量、xlog编号等信息。

  输入参数：

  |      序号       |      入参       |      类型      |      描述                                                    |
    | -------------- | -------------- | -------------- | ------------------------------------------------------------ |
  | 1             | operation      | int            | 取值范围：-1~2。 <ul> <li>-1：关闭统计功能；</li> <li>0：重置数据；</li> <li>1：开启统计功能；</li> <li>2：查询（默认）。</li> </ul> |

  返回字段：

  |       序号      |       返回字段      |       类型      |       描述                              |
    | -------------- | ------------------ | -------------- | -------------------------------------- |
  | 1              | is_enable_stat     | boolean        | 是否开启，默认关闭。                   |
  | 2              | total_write_bytes  | uint64         | 总写入字节数。                         |
  | 3              | write_times        | uint64         | 调用write的次数。                      |
  | 4              | total_write_time   | uint64         | 调用write的总耗时（单位：us）。        |
  | 5              | avg_write_time     | uint64         | 每次调用write的平均耗时（单位：us）。  |
  | 6              | avg_write_bytes    | uint64         | 平均写字节数。                         |
  | 7              | total_sync_bytes   | uint64         | 总刷盘字节数。                         |
  | 8              | sync_times         | uint64         | 调用sync函数刷盘次数。                 |
  | 9              | total_sync_time    | uint64         | 调用sync函数刷盘总耗时（单位：us）。   |
  | 10             | avg_sync_time      | uint64         | 每次调用sync函数平均耗时（单位：us）。 |
  | 11             | avg_sync_bytes     | uint64         | 每次调用sync函数刷盘的平均字节数。     |
  | 12             | current_xlog_segno | uint64         | 当前正在写的xlog段文件编号。           |
  | 13             | inited_xlog_segno  | uint64         | 已初始化的最新的xlog段文件编号。       |
  | 14             | last_reset_time    | timestamptz    | 末次重置时间，只有重置过才会有值。     |
  | 15             | cur_time           | timestamptz    | 当前时间。                             |

  >![](public_sys-resources/icon-note.png) **说明：**
  >
  > 1. 当 write_times 为0时，avg_write_time、avg_write_bytes 返回 NULL 值。
  > 2. 当 sync_times 为0时，avg_sync_time、avg_sync_bytes 返回 NULL 值。
  > 3. current_xlog_segno、inited_xlog_segno、cur_time 等字段不受开关、重置功能影响，current_xlog_segno 只有 walrecvwriter 线程在运行时才会获更新数据。
  > 4. uint64 类型目前在系统内部实际被识别为 xid，即事务ID类型，在进行运算时需要注意。
  > 5. 数据库重启后所有数据回到初始化状态，功能默认关闭。

  示例：
  ```sql
  select * from gs_stat_walrecvwriter(1);
  select * from gs_stat_walrecvwriter(2);
  select * from gs_stat_walrecvwriter(0);
  select * from gs_stat_walrecvwriter(-1);
  ```

- generate_procoverage_report<a name="section14683125861213"></a>
  
  描述：生成postgres库[coverage.proc_coverage](./coverage-proc_coverage.md)表中两个覆盖率序号间存储过程的覆盖率报告，需要在postgres库下执行，且打开[enable_proc_coverage](../DatabaseReference/%E5%85%B6%E5%AE%83%E9%80%89%E9%A1%B9.md#section14683125861213)参数。

  输入参数：

  |参数|说明|取值范围|
  |--|--|--|
  |begin_id|生成存储过程覆盖率报告的起始id（包含）|bigint，大于0，begin_id大于end_id；begin_id与end_id同为-1时，生成所有记录的存储过程覆盖率报告|
  |end_id|生成存储过程覆盖率报告的结束id（包含）|bigint，大于0，begin_id大于end_id；begin_id与end_id同为-1时，生成所有记录的存储过程覆盖率报告|

  >![](public_sys-resources/icon-note.gif) **说明：**
  >
  > 1. 当begin_id和end_id符合取值范围时，生成二者间（包含）id的所有覆盖率记录的报告。如generate_procoverage_report(2, 5)，若[coverage.proc_coverage](./coverage-proc_coverage.md)表中存在coverage_id为2、3、4、5的报告，将生成2、3、4、5记录的覆盖率报告；若仅存在coverage_id为3、4的报告，将生成3、4记录的覆盖率报告。
  > 2. 函数直接输出html格式的text内容，配合\a、\t格式化输出，\o指定输出文件，生成html覆盖率报告

  示例：
  ```sql
  openGauss=# \a
  Output format is unaligned.
  openGauss=# \t
  Showing only tuples.
  openGauss=# \o /data/openGauss/test.html
  openGauss=# select generate_procoverage_report(-1, -1);
  openGauss=# \o
  ```

- gs_xlog_keepers()

  描述：查询所有阻止wal清理的因素，用于定位pg_xlog目录中xlog日志堆积的原因。

  返回字段说明：

  - keeptype：阻止wal清理的类型描述。

    取值范围如下：

    - Base Keep：

      在主库中，此取值的意义是已确认完成checkpoint的lsn位置所对应的wal文件名。

      在备库中，此取值的意义是当前未完成回放的wal文件名。

    - Segments Keep：由wal_keep_segments参数导致的wal文件保护。

    - Slots Keep：活跃的物理或者逻辑复制槽导致的wal文件保护。

    - Basebackup Keep：当前数据库有执行gs_basebackup命令，由于这个命令导致的wal文件保护。

    - Build Keep：当前数据库的备库在执行build命令，此为执行build命令导致的wal文件保护。

    - Unactived Wal Send Keep：由于备机未启动导致的wal文件保护。

    - Invalid Slot Keep：由未启用的复制槽导致的wal文件保护。

    - CBM Keep：由CBM功能导致的wal文件保护。

    - Standby Checkpoint Keep：备机redo过的checkpoint记录导致的wal文件保护。

    - Archive Keep：由wal归档功能导致的wal文件保护。

    - Resist Archive：OBS归档要求的wal超过max_size_for_xlog_prune参数的限制导致的wal文件保护。

  - keepsegment：当前限制项保护的wal文件名。

  - describe：对keeptype的解释。

  示例：

  ```sql
  openGauss=# select *  from gs_xlog_keepers();
     keeptype    |       keepsegment        |                                         describe                                          
  ---------------+--------------------------+-------------------------------------------------------------------------------------------
   Base keep     | 00000001000000000000000B | base on redo lsn of recently checkpoint for primary or current working segment on standby
   Segments Keep | 000000010000000000000008 | base on wal_keep_segments GUC
   Slots keep    | 00000001000000000000000B | base on physical or logical slots
   Archive Keep  | 00000001000000000000000B | base on wal archive
  (4 rows)
  ```
