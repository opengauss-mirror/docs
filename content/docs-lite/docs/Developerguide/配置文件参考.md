# 配置文件参考<a name="ZH-CN_TOPIC_0289900190"></a>

**表 1**  参数说明

<a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_t8c884119098c47d282254953ecb43ad7"></a>
<table><thead align="left"><tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_rd5076118cfd746e78fb78cf11ec87425"><th class="cellrowborder" valign="top" width="15.540000000000001%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a88b85ae1d25e4f759ac30c544e4a1f42"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a88b85ae1d25e4f759ac30c544e4a1f42"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a88b85ae1d25e4f759ac30c544e4a1f42"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="44.49%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6cd07681dd974f6b99acecac8f440d71"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6cd07681dd974f6b99acecac8f440d71"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6cd07681dd974f6b99acecac8f440d71"></a>描述</p>
</th>
<th class="cellrowborder" valign="top" width="39.97%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a63be54178cf24ffdb0e03b7d5b0454db"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a63be54178cf24ffdb0e03b7d5b0454db"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a63be54178cf24ffdb0e03b7d5b0454db"></a>取值范围</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r0e93d13dbf3d439691807152b479cce4"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a3d147eb75449407498f9338ee5a6807e"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a3d147eb75449407498f9338ee5a6807e"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a3d147eb75449407498f9338ee5a6807e"></a>local</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a601f918d46e34e1e948b4b5addd75100"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a601f918d46e34e1e948b4b5addd75100"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a601f918d46e34e1e948b4b5addd75100"></a>表示这条记录只接受通过Unix域套接字进行的连接。没有这种类型的记录，就不允许Unix域套接字的连接。</p>
<p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ae4e4f8a6489143e8970f422a00f59d6d"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ae4e4f8a6489143e8970f422a00f59d6d"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ae4e4f8a6489143e8970f422a00f59d6d"></a>只有在从服务器本机使用gsql连接且在不指定-U参数的情况下，才是通过Unix域套接字连接。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ac86aa174b884462bb25e9d26da108cdd"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ac86aa174b884462bb25e9d26da108cdd"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ac86aa174b884462bb25e9d26da108cdd"></a>-</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_rc64a2ecd234a4cff8d71186a119d9f48"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ad15b1471674447e6836227d14bd4dfee"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ad15b1471674447e6836227d14bd4dfee"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ad15b1471674447e6836227d14bd4dfee"></a>host</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a19041a866f0a44e3b0215220c5618a95"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a19041a866f0a44e3b0215220c5618a95"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a19041a866f0a44e3b0215220c5618a95"></a>表示这条记录既接受一个普通的TCP/IP套接字连接，也接受一个经过SSL加密的TCP/IP套接字连接。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a7aa33fd2b8164b539d3c91426250e017"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a7aa33fd2b8164b539d3c91426250e017"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a7aa33fd2b8164b539d3c91426250e017"></a>-</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_rb0a486192cd94e00bcd6846ae7ab2359"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a65a4d70dc7b44327a521ce04362e58cd"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a65a4d70dc7b44327a521ce04362e58cd"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a65a4d70dc7b44327a521ce04362e58cd"></a>hostssl</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_afde8357b110f460d8c62e15673a69d12"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_afde8357b110f460d8c62e15673a69d12"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_afde8357b110f460d8c62e15673a69d12"></a>表示这条记录只接受一个经过SSL加密的TCP/IP套接字连接。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa3bf5f50a4bb4c5f8b1522e26807bc0b"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa3bf5f50a4bb4c5f8b1522e26807bc0b"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa3bf5f50a4bb4c5f8b1522e26807bc0b"></a>用SSL进行安全的连接，需要配置申请数字证书并配置相关参数，详细信息请参见<a href="用SSL进行安全的TCP-IP连接.md">用SSL进行安全的TCP/IP连接</a>。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r1ffcf1e8552548bba15a94e2e6406049"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a9070e8740b804797ad44f44c87b15798"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a9070e8740b804797ad44f44c87b15798"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a9070e8740b804797ad44f44c87b15798"></a>hostnossl</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6f2f503aa36e40a1b262ed57f9239cdc"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6f2f503aa36e40a1b262ed57f9239cdc"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6f2f503aa36e40a1b262ed57f9239cdc"></a>表示这条记录只接受一个普通的TCP/IP套接字连接。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ab7ab5979187940cb958f89e81786987f"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ab7ab5979187940cb958f89e81786987f"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ab7ab5979187940cb958f89e81786987f"></a>-</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_rfddd5eaeca454af0ad66033dca4e4837"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a40fa0c7371cd4286822354f6a331adf0"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a40fa0c7371cd4286822354f6a331adf0"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a40fa0c7371cd4286822354f6a331adf0"></a>DATABASE</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a4301fbfc25764c41be937f8d1a754dd2"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a4301fbfc25764c41be937f8d1a754dd2"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a4301fbfc25764c41be937f8d1a754dd2"></a>声明记录所匹配且允许访问的数据库。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_u53c9c9b83e6b488ba146faae7f280d27"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_u53c9c9b83e6b488ba146faae7f280d27"></a><ul id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_u53c9c9b83e6b488ba146faae7f280d27"><li>all：表示该记录匹配所有数据库。</li><li>sameuser：表示如果请求访问的数据库和请求的用户同名，则匹配。</li><li>samerole：表示请求的用户必须是与数据库同名角色中的成员。</li><li>samegroup：与samerole作用完全一致，表示请求的用户必须是与数据库同名角色中的成员。</li><li>一个包含数据库名的文件或者文件中的数据库列表：文件可以通过在文件名前面加前缀@来声明。文件中的数据库列表以逗号或者换行符分隔。</li><li>特定的数据库名称或者用逗号分隔的数据库列表。<div class="note" id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n4018a3a66c6444dbac1a99de451eab0e"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n4018a3a66c6444dbac1a99de451eab0e"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n4018a3a66c6444dbac1a99de451eab0e"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_af9c8459cbe104651b839a08de5f450c6"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_af9c8459cbe104651b839a08de5f450c6"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_af9c8459cbe104651b839a08de5f450c6"></a>值replication表示如果请求一个复制链接，则匹配，但复制链接不表示任何特定的数据库。如需使用名为replication的数据库，需在database列使用记录“replication”作为数据库名。</p>
</div></div>
</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r34ddbc9e0001483cb0142590a25fa92b"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a28b6c4a0bbbd42f68a7c374dd55c3ac4"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a28b6c4a0bbbd42f68a7c374dd55c3ac4"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a28b6c4a0bbbd42f68a7c374dd55c3ac4"></a>USER</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a08c56447ec304d38904dc86a9d1c5791"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a08c56447ec304d38904dc86a9d1c5791"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a08c56447ec304d38904dc86a9d1c5791"></a>声明记录所匹配且允许访问的数据库用户。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ua072cd25502344d89af498da1a19c0cf"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ua072cd25502344d89af498da1a19c0cf"></a><ul id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ua072cd25502344d89af498da1a19c0cf"><li>all：表明该记录匹配所有用户。</li><li>+用户角色：表示匹配任何直接或者间接属于这个角色的成员。<div class="note" id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n1bc02700d41d49508ac85b346ea0d856"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n1bc02700d41d49508ac85b346ea0d856"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n1bc02700d41d49508ac85b346ea0d856"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a655480e89ecc4a36b6661888a86f6ee7"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a655480e89ecc4a36b6661888a86f6ee7"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a655480e89ecc4a36b6661888a86f6ee7"></a>+表示前缀符号。</p>
</div></div>
</li><li>一个包含用户名的文件或者文件中的用户列表：文件可以通过在文件名前面加前缀@来声明。文件中的用户列表以逗号或者换行符分隔。</li><li>特定的数据库用户名或者用逗号分隔的用户列表。</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r93399a9a41754cc2a49c1d1912f55b33"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6ddada751cd94278818895a8fa7ec386"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6ddada751cd94278818895a8fa7ec386"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6ddada751cd94278818895a8fa7ec386"></a>ADDRESS</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a39896cb514d840d78f07257cc1aa9488"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a39896cb514d840d78f07257cc1aa9488"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a39896cb514d840d78f07257cc1aa9488"></a>指定与记录匹配且允许访问的IP地址范围。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa1c0c02f694f4337857f4fc876c470f0"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa1c0c02f694f4337857f4fc876c470f0"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa1c0c02f694f4337857f4fc876c470f0"></a>支持IPv4和IPv6，可以使用如下两种形式来表示：</p>
<a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_uc715fc52126a442d84c14cdbd609195f"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_uc715fc52126a442d84c14cdbd609195f"></a><ul id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_uc715fc52126a442d84c14cdbd609195f"><li>IP地址/掩码长度。例如，10.10.0.0/24</li><li>IP地址子网掩码。例如，10.10.0.0 255.255.255.0</li></ul>
<div class="note" id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_nc6cf4bba90b247fe902d295f6b387049"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_nc6cf4bba90b247fe902d295f6b387049"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_nc6cf4bba90b247fe902d295f6b387049"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a23d07115bbd4442288308b9996360f03"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a23d07115bbd4442288308b9996360f03"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a23d07115bbd4442288308b9996360f03"></a>以IPv4格式给出的IP地址会匹配那些拥有对应地址的IPv6连接，比如127.0.0.1将匹配IPv6地址 ::ffff:127.0.0.1。</p>
</div></div>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r702e54e0c406476daffdc356358b4c94"><td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6e48542a23d548e5803e82823ea76e9c"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6e48542a23d548e5803e82823ea76e9c"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6e48542a23d548e5803e82823ea76e9c"></a>METHOD</p>
</td>
<td class="cellrowborder" valign="top" width="44.49%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a46f011ec6d9b43f38818eadf1bcfb983"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a46f011ec6d9b43f38818eadf1bcfb983"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a46f011ec6d9b43f38818eadf1bcfb983"></a>声明连接时使用的认证方法。</p>
</td>
<td class="cellrowborder" valign="top" width="39.97%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6404e9b97d624ee28e64440df3729cfa"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6404e9b97d624ee28e64440df3729cfa"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a6404e9b97d624ee28e64440df3729cfa"></a>本产品支持如下几种认证方式，详细解释请参见<a href="#zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_t4a2e3ffd422440c1a46233101d204975">表2</a>：</p>
<a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_u7d9957f9d28e4f409c892772e396a468"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_u7d9957f9d28e4f409c892772e396a468"></a><ul id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_u7d9957f9d28e4f409c892772e396a468"><li>trust</li><li>reject</li><li>md5（不推荐使用，默认不支持，可通过<a href="安全和认证（postgresql-conf）.md#zh-cn_topic_0283137371_zh-cn_topic_0237124696_zh-cn_topic_0059778664_se6b55c35b44945099d33b403a5a43bce">password_encryption_type</a>参数配置）<div class="note" id="note1936173445511"><a name="note1936173445511"></a><a name="note1936173445511"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p1324123610557"><a name="p1324123610557"></a><a name="p1324123610557"></a>MD5加密算法安全性低，存在安全风险，建议使用更安全的加密算法。</p>
</div></div>
</li><li>sha256</li><li>sm3</li><li>cert</li><li>peer（仅用于local模式）</li></ul>
</td>
</tr>
</tbody>
</table>

**表 2**  认证方式

<a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_t4a2e3ffd422440c1a46233101d204975"></a>
<table><thead align="left"><tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r0e6b9aeb488b4575b0c6adf345b49fb7"><th class="cellrowborder" valign="top" width="15.790000000000001%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aaced681c4a234413852ccad9f73a1a9d"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aaced681c4a234413852ccad9f73a1a9d"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aaced681c4a234413852ccad9f73a1a9d"></a>认证方式</p>
</th>
<th class="cellrowborder" valign="top" width="84.21%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a9aa604feedaf41329e3cdcc40955b314"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a9aa604feedaf41329e3cdcc40955b314"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a9aa604feedaf41329e3cdcc40955b314"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_rad3bb63daa0a4e3298cd98c3f496d1d8"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a7cfacacfbc174e8eb44cb06bef574c03"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a7cfacacfbc174e8eb44cb06bef574c03"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a7cfacacfbc174e8eb44cb06bef574c03"></a>trust</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aafd415e38f32461fb21da30f7bfcc519"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aafd415e38f32461fb21da30f7bfcc519"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aafd415e38f32461fb21da30f7bfcc519"></a>采用这种认证模式时，本产品只完全信任从服务器本机使用gsql且不指定-U参数的连接，此时不需要口令。</p>
<p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ae4fe12b9b6bd4143bfbe935d331bfdf0"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ae4fe12b9b6bd4143bfbe935d331bfdf0"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ae4fe12b9b6bd4143bfbe935d331bfdf0"></a>trust认证对于单用户工作站的本地连接是非常合适和方便的，通常不适用于多用户环境。如果想使用这种认证方法，可利用文件系统权限限制对服务器的Unix域套接字文件的访问。要使用这种限制有两个方法：</p>
<a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ue14f46581ffc424ca8d9d7236a5f6a9e"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ue14f46581ffc424ca8d9d7236a5f6a9e"></a><ul id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ue14f46581ffc424ca8d9d7236a5f6a9e"><li>设置参数<a href="连接设置.md#zh-cn_topic_0283136886_zh-cn_topic_0237124695_zh-cn_topic_0059777636_s09d0cf55124b4f1aa3d401d18b9b4151">unix_socket_permissions</a>和<a href="连接设置.md#zh-cn_topic_0283136886_zh-cn_topic_0237124695_zh-cn_topic_0059777636_s648c56ec371e4f1cb9389a426fcd2e96">unix_socket_group</a>。</li><li>设置参数<a href="连接设置.md#zh-cn_topic_0283136886_zh-cn_topic_0237124695_zh-cn_topic_0059777636_s29dfb1c7d5124f6aa26c7465d2e43c6d">unix_socket_directory</a>，将Unix域套接字文件放在一个经过恰当限制的目录里。</li></ul>
<div class="notice" id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n1c88fd4dba284f148442525f02492395"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n1c88fd4dba284f148442525f02492395"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n1c88fd4dba284f148442525f02492395"></a><span class="noticetitle"> 须知： </span><div class="noticebody"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a499eeebcfcc04e5f936952be94f8a780"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a499eeebcfcc04e5f936952be94f8a780"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a499eeebcfcc04e5f936952be94f8a780"></a>设置文件系统权限只能Unix域套接字连接，它不会限制本地TCP/IP连接。为保证本地TCP/IP安全，<span id="text52151847143419"><a name="text52151847143419"></a><a name="text52151847143419"></a>openGauss</span>不允许远程连接使用trust认证方法。</p>
</div></div>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_rb63d9ebe8ee84296b501dec9d30d747f"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa3284e4dc28f4d93aa18261e7095b397"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa3284e4dc28f4d93aa18261e7095b397"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_aa3284e4dc28f4d93aa18261e7095b397"></a>reject</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_adc50a696177a48f09aaf03aab84f5610"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_adc50a696177a48f09aaf03aab84f5610"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_adc50a696177a48f09aaf03aab84f5610"></a>无条件地拒绝连接。常用于过滤某些主机。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r33e41e1a7b0d4c1887e93f93d61baca3"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ac56407ff58234769a52c7bd2757fe475"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ac56407ff58234769a52c7bd2757fe475"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_ac56407ff58234769a52c7bd2757fe475"></a>md5</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a2a609f87a3ea4608ba8a2d80d2474ca8"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a2a609f87a3ea4608ba8a2d80d2474ca8"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_a2a609f87a3ea4608ba8a2d80d2474ca8"></a>要求客户端提供一个md5加密的口令进行认证。</p>
<div class="notice" id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n5f2c3a01cbd24f54923245b9966c4275"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n5f2c3a01cbd24f54923245b9966c4275"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_n5f2c3a01cbd24f54923245b9966c4275"></a><span class="noticetitle"> 须知： </span><div class="noticebody"><a name="ul125461448104017"></a><a name="ul125461448104017"></a><ul id="ul125461448104017"><li>MD5加密算法安全性低，存在安全风险，建议使用更安全的加密算法。</li><li><span id="text1798254510538"><a name="text1798254510538"></a><a name="text1798254510538"></a>openGauss</span>保留md5认证和密码存储，是为了便于第三方工具的使用（比如TPCC评测工具）。</li></ul>
</div></div>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_r9d49a70bfbfa461ba62cdcb4583d5447"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_adb6b4a27e19b407cb5c0f265eae382a3"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_adb6b4a27e19b407cb5c0f265eae382a3"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_adb6b4a27e19b407cb5c0f265eae382a3"></a>sha256</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_acba1be8860e444dabbbf6a9546dcd2df"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_acba1be8860e444dabbbf6a9546dcd2df"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_zh-cn_topic_0059778722_acba1be8860e444dabbbf6a9546dcd2df"></a>要求客户端提供一个sha256算法加密的口令进行认证，该口令在传送过程中结合salt（服务器发送给客户端的随机数）的单向sha256加密，增强了安全性。</p>
</td>
</tr>
<tr id="row101471343153910"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="p714820432396"><a name="p714820432396"></a><a name="p714820432396"></a>sm3</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="p1231620213406"><a name="p1231620213406"></a><a name="p1231620213406"></a>要求客户端提供一个sm3算法加密口令进行认证，该口令在传送过程中结合salt（服务器发送给客户端的随机数）的单项sm3的加密，增加了安全性。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_row14107154102319"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p1010754112312"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p1010754112312"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p1010754112312"></a>cert</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p11108124162312"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p11108124162312"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p11108124162312"></a>客户端证书认证模式，此模式需进行SSL连接配置且需要客户端提供有效的SSL证书，不需要提供用户密码。</p>
<div class="notice" id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_note12717134712264"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_note12717134712264"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_note12717134712264"></a><span class="noticetitle"> 须知： </span><div class="noticebody"><p id="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p167181847162617"><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p167181847162617"></a><a name="zh-cn_topic_0283137369_zh-cn_topic_0237121091_p167181847162617"></a>该认证方式只支持hostssl类型的规则。</p>
</div></div>
</td>
</tr>
<tr id="row3365105783517"><td class="cellrowborder" valign="top" width="15.790000000000001%" headers="mcps1.2.3.1.1 "><p id="p12365457173518"><a name="p12365457173518"></a><a name="p12365457173518"></a>peer</p>
</td>
<td class="cellrowborder" valign="top" width="84.21%" headers="mcps1.2.3.1.2 "><p id="p174171758188"><a name="p174171758188"></a><a name="p174171758188"></a>获取客户端所在操作系统用户名，并检查与数据库初始用户名是否一致。此方式只支持数据库初始用户通过local模式本地连接，并支持通过配置pg_ident.conf建立操作系统用户与数据库初始用户映射关系。</p>
<p id="p124641974710"><a name="p124641974710"></a><a name="p124641974710"></a>假设操作系统用户名为omm，数据库初始用户为dbAdmin，在pg_hba.conf中配置local模式为peer认证：</p>
<pre class="screen" id="screen78591452152412"><a name="screen78591452152412"></a><a name="screen78591452152412"></a>local   all    all        peer    map=mymap</pre>
<p id="p17145169101417"><a name="p17145169101417"></a><a name="p17145169101417"></a>其中map=mymap指定使用的用户名映射，并在pg_ident.conf中添加映射名称为mymap的用户名映射如下：</p>
<pre class="screen" id="screen17311668259"><a name="screen17311668259"></a><a name="screen17311668259"></a># MAPNAME       SYSTEM-USERNAME         PG-USERNAME
mymap                omm                                  dbAdmin</pre>
<div class="note" id="note17472112714196"><a name="note17472112714196"></a><a name="note17472112714196"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p2472327181911"><a name="p2472327181911"></a><a name="p2472327181911"></a>通过gs_guc reload方式修改pg_hba.conf配置可以立即生效无需重启数据库。直接编辑修改pg_ident.conf配置后下次连接时自动生效无需重启数据库。</p>
</div></div>
</td>
</tr>
</tbody>
</table>

