# Logging Destination<a name="EN-US_TOPIC_0289900945"></a>

## log\_destination<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_sb6c9884f69bd4765a60f80810c94f194"></a>

**Parameter description**: openGauss supports several methods of logging server messages. Set this parameter to a list of desired log destinations separated by commas. \(For example, log\_destination="stderr,csvlog"\)

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

**Value range**: a string

The valid values are  **stderr**,  **csvlog**,  **syslog**, and  **eventlog**.

-   **stderr**  indicates that logs are printed to the screen.
-   **csvlog**  indicates that logs are output in comma separated value \(CSV\) format. The prerequisite for generating logs in CSV format is that  **[logging\_collector](#en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s61d6090c04ee464fb54f8b31936ba818)**  must be set to  **on**. For details, see  [Using CSV Log Output](using-csv-log-output.md).
-   **syslog**  indicates that logs are recorded using the syslog of the OS. openGauss can record logs using syslog from  **LOCAL0**  to  **LOCAL7**. For details, see  [syslog\_facility](#en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s853e14ac6a8a47678036cdc8e5119090). To record logs using syslog, add the following information to syslog daemon's configuration file:

    ```
    local0.*  /var/log/omm
    ```


**Default value:** **stderr**

## logging\_collector<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s61d6090c04ee464fb54f8b31936ba818"></a>

**Parameter description**: Specifies whether to enable the logger process to collect logs. This process captures log messages sent to  **stderr**  or  **csvlog**  and redirects them into log files.

This method is more effective than recording logs to syslog because some types of messages cannot be displayed in syslog output, such as messages indicating the loading failures of dynamic link libraries and error messages generated by scripts \(for example,  **archive\_command**\).

This parameter is a POSTMASTER parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

>![](public_sys-resources/icon-notice.gif) **NOTICE:** 
>It is possible to log to  **stderr**  without using the logging collector and the log messages will go to where the server's  **stderr**  is directed. However, this method is only suitable for low log volumes due to difficulties in rotating log files.

**Value range**: Boolean

-   **on**  indicates that the log collection is enabled.
-   **off**  indicates that the log collection is disabled.

**Default value**:  **on**

## log\_directory<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_sfbedf09fcf1a4223a4538679f80f12a9"></a>

**Parameter description**: Specifies the directory for storing log files when  **logging\_collector**  is set to  **on**. The value can be an absolute path, or relative to the data directory. The  **log\_directory**  parameter can be dynamically modified using the  **gs\_guc reload**  command. Only users with the  **sysadmin**  permission can access this parameter.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

>![](public_sys-resources/icon-notice.gif) **NOTICE:** 
>-   If this parameter is set to an invalid path, openGauss cannot be started.
>-   If you modify the  **log\_directory**  parameter using the  **gs\_guc reload**  command, and the specified path is valid, the log files are output to this new path. If the specified path is invalid, the log files are output to the valid path set last time and the database operation is not affected. The invalid value is still written into the configuration file.
>-   In the sandbox environment, the path cannot contain /var/chroot. For example, if the absolute path of log is  **/var/chroot/var/lib/log/Ruby/pg\_log/cn\_log**, you only need to set the path to  **/var/lib/log/Ruby/pg\_log/cn\_log**.

>![](public_sys-resources/icon-note.gif) **NOTE:** 
>-   Valid path: Users have read and write permissions on the path.
>-   Invalid path: Users do not have read or write permissions on an invalid path.

**Value range**: a string

**Default value**: specified during installation

## log\_filename<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s3226ae3209154e249928c24ec67c5809"></a>

**Parameter description**: Specifies the names of generated log files when  **logging\_collector**  is set to  **on**. The value is treated as a strftime pattern, so %-escapes can be used to specify time-varying file names. Only users with the  **sysadmin**  permission can access this parameter.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

>![](public_sys-resources/icon-notice.gif) **NOTICE:** 
>-   You are advised to use %-escapes to specify the log file names for efficient management of log files.
>-   If  **log\_destination**  is set to  **csvlog**, log files are output in CSV format with timestamped names, for example,  **server\_log.1093827753.csv**.

**Value range**: a string

**Default value**:  **postgresql-**_%Y_-_%m_-_%d_\__%H%M%S_**.log**

## log\_file\_mode<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s25e56fda28e1437b925cddfae168d607"></a>

**Parameter description**: Specifies the permissions of log files when  **[logging\_collector](#en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s61d6090c04ee464fb54f8b31936ba818)**  is set to  **on**. The parameter value is usually a number in the format acceptable to the  **chmod**  and  **umask**  system calls.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

>![](public_sys-resources/icon-notice.gif) **NOTICE:** 
>-   Before setting this parameter, set  **log\_directory**  to store the logs to a directory other than the data directory.
>-   Do not make the log files world-readable because they might contain sensitive data.

**Value range**: an octal integer ranging from 0000 to 0777 \(that is, 0 to 511 in the decimal format\)

>![](public_sys-resources/icon-note.gif) **NOTE:** 
>-   **0600**  indicates that log files are readable and writable only to the server administrator.
>-   **0640**  indicates that log files are readable and writable to members of the administrator's group.

**Default value:** **0600**

## log\_truncate\_on\_rotation<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s143b6d35ddbe48b8810106a4d3929e8a"></a>

**Parameter description**: Specifies the writing mode of the log files when  **logging\_collector**  is set to  **on**.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

A setting example is as follows:

Assume that you want logs to be kept for 7 days, a log file generated each day to be named  **server\_log.Mon**  on Monday,  **server\_log.Tue**  on Tuesday, and so forth, and this week's log files to be overwritten by next week's log files. Then you can set  **log\_filename**  to  **server\_log.%a**,  **log\_truncate\_on\_rotation**  to  **on**, and  **log\_rotation\_age**  to  **1440**  \(indicating that the valid duration of the log file is 24 hours\).

**Value range**: Boolean

-   **on**  indicates that openGauss overwrites the existing log files of the same name on the server.
-   **off**  indicates that openGauss appends the logging messages to the existing log files of the same name on the server.

**Default value**:  **off**

## log\_rotation\_age<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s3ce09b8a7ae543b18fae13a821a725a5"></a>

**Parameter description**: Specifies the interval for creating a log file when  **logging\_collector**  is set to  **on**. If the duration from the time when the last log file was created to the current time is greater than the value of  **log\_rotation\_age**, a new log file will be generated.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

**Value range**: an integer ranging from 0 to 35791394. The unit is min.  **0**  indicates that the time-based creation of new log files is disabled.

**Default value**:  **1440**

## log\_rotation\_size<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s282e72143bb14915bedb4b432586b07e"></a>

**Parameter description**: Specifies the maximum size of a server log file when  **logging\_collector**  is set to  **on**. If the total size of messages in a log file exceeds the specified value, a log file will be generated.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

**Value range**: an integer ranging from 0 to  _INT\_MAX_/1024. The unit is KB.

**0**  indicates that the capacity-based creation of new log files is disabled.

It is recommended that the unit of the value be MB or bigger, so that log files can be of proper size.

**Default value:** **20 MB**

## syslog\_facility<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s853e14ac6a8a47678036cdc8e5119090"></a>

**Parameter description**: Specifies the syslog facility to be used when  **log\_destination**  is set to  **syslog**.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

**Value range**: enumerated values. Valid values are  **local0**,  **local1**,  **local2**,  **local3**,  **local4**,  **local5**,  **local6**, and  **local7**.

**Default value:** **local0**

## syslog\_ident<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_sb24f217a6019495f96ca476232c71e18"></a>

**Parameter description**: Specifies the identifier of openGauss messages in syslog logs when  **[log\_destination](#en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_sb6c9884f69bd4765a60f80810c94f194)**  is set to  **syslog**.

This parameter is a SIGHUP parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

**Value range**: a string

**Default value**:  **postgres**

## event\_source<a name="en-us_topic_0283136719_en-us_topic_0237124721_en-us_topic_0059778787_s739c0331179f4669a2d6092219aa62de"></a>

**Parameter description**: This parameter takes effect only in a Windows environment and is not supported in openGauss. It specifies the identifier of openGauss messages in logs when  **log\_destination**  is set to  **eventlog**.

This parameter is a POSTMASTER parameter. Set it based on instructions provided in  [Table 1](resetting-parameters.md#en-us_topic_0283137176_en-us_topic_0237121562_en-us_topic_0059777490_t91a6f212010f4503b24d7943aed6d846).

**Value range**: a string

**Default value**:  **PostgreSQL**

