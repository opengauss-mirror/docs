# Incremental Migration Tool gs\_replicate<a name="EN-US_TOPIC_0000001264707837"></a>

## Availability<a name="section56086982"></a>

This feature is available since openGauss 5.0.0.

## Introduction<a name="section35020791"></a>

gs\_replicate migrates incremental data generated during MySQL data migration (including full and incremental migration) to openGauss.

## Benefits<a name="section46751668"></a>

You can use gs\_replicate to migrate incremental data from the MySQL database to the openGauss database.

## Description<a name="section18111828"></a>

The source end of the debezium mysql connector monitors binlogs of the MySQL database and writes DDL and DML operations to Kafka in AVRO format. The sink end of the debezium mysql connector reads DDL and DML operations in AVRO format from Kafka, assembles the data into transactions, and plays back the transactions in parallel on the openGauss based on the transaction granularity to migrate DDL and DML operations from MySQL to openGauss online.

This solution strictly ensures the transaction sequence. Therefore, DDL and DML operations are routed in a topic of Kafka, and the number of partitions of the topic can only be 1 (**num.partitions=1**). In this way, the data pushed from the source end to Kafka and the data obtained by the sink end from Kafka is in strict sequence.

## Enhancements<a name="section28788730"></a>

None.

## Constraints<a name="section06531946143616"></a>

- Currently, incremental data generated by MySQL INSERT, UPDATE, and DELETE (IUD) operations can be migrated to openGauss.

- MySQL DDL statements compatible with the openGauss database can be migrated. For incompatible DDL statements, an error will be reported during the migration. (openGauss is improving its compatibility with DDL statements.)

- To ensure the sequence and consistency of transactions, settings such as skip\_event, limit\_table, skip\_table are not supported.

- MySQL 5.7 or later is required.

- The MySQL parameter must be set to **log\_bin=ON, binlog\_format=ROW, binlog\_row\_image=FULL, gtid\_mode = ON**. If **gtid\_mode** is set to **off**, the sink end replays data in serial mode based on the transaction sequence, which deteriorates the online migration performance.

- Full migration is performed by using [gs_mysync](https://gitee.com/opengauss/openGauss-tools-chameleon/blob/master/README.en.md) before incremental migration.

- Kafka stores data in AVRO format. The AVRO [naming rules](https://avro.apache.org/docs/1.11.1/specification/#names) are as follows:

  ```
  - Start with [A-Za-z_].
  - Subsequently contain only [A-Za-z0-9_].
  ```

  Therefore, naming identifiers in MySQL, including table names and column names, must comply with the preceding naming rules. Otherwise, an error will be reported during online migration.

## Dependencies<a name="section57771982"></a>

gs_replicate depends on the MySQL migration tool gs_rep\_portal.
