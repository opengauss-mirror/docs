# 高危操作一览表

各项操作请严格遵守指导书操作，同时避免执行如下高危操作。

[表1](#zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_t725e2ece7f7a4d5f962b2c314e7e836b)中描述在产品的操作与维护阶段，进行日常操作时应注意的严禁操作。  

**表 1**  禁用操作

<a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_t725e2ece7f7a4d5f962b2c314e7e836b"></a>
<table><thead align="left"><tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_r9cf4967d6d5748e19f4c5710442a7f2a"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_abd7bf53f59164b05a71cc5092ff012e7"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_abd7bf53f59164b05a71cc5092ff012e7"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_abd7bf53f59164b05a71cc5092ff012e7"></a>操作名称</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a27373318761947a19205c4429c197f34"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a27373318761947a19205c4429c197f34"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a27373318761947a19205c4429c197f34"></a>操作风险</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_r8fb9b9ee04614ae4b19d6257175c7d09"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ad0c36ad81f124d0c937883d307633567"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ad0c36ad81f124d0c937883d307633567"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ad0c36ad81f124d0c937883d307633567"></a>严禁修改数据目录下文件名，权限，内容不能修改，不能删除内容。</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a21ffdbb8f4a247a1b7c2cd10a28823c5"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a21ffdbb8f4a247a1b7c2cd10a28823c5"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a21ffdbb8f4a247a1b7c2cd10a28823c5"></a>导致<span id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_text3920216153317"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_text3920216153317"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_text3920216153317"></a>数据库节点</span>实例出现严重错误，并且无法修复。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_r8585d9fe35434479a273e3a0bba74407"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ae436631e9128462698b0926b34aa1b3d"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ae436631e9128462698b0926b34aa1b3d"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ae436631e9128462698b0926b34aa1b3d"></a>严禁删除数据库系统表或系统表数据。</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a3ff42e36b6024ab8b9e26649757baa95"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a3ff42e36b6024ab8b9e26649757baa95"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a3ff42e36b6024ab8b9e26649757baa95"></a>删除系统表将导致无法正常进行业务操作。</p>
</td>
</tr>
</tbody>
</table>

[表2](#zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_tf7f1e2a0747f496baffa365814127a3c)中描述在产品的操作与维护阶段，进行日常操作时应注意的高危操作。  

**表 2**  高危操作

<a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_tf7f1e2a0747f496baffa365814127a3c"></a>
<table><thead align="left"><tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_r00b800b9cfde4444a9745ace4f3f9771"><th class="cellrowborder" valign="top" width="9.839016098390161%" id="mcps1.2.7.1.1"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ae1e8f48a5d714b55b61062efaf1446a2"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ae1e8f48a5d714b55b61062efaf1446a2"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_ae1e8f48a5d714b55b61062efaf1446a2"></a>操作分类</p>
</th>
<th class="cellrowborder" valign="top" width="25.807419258074194%" id="mcps1.2.7.1.2"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_af94dcd3387914bfab8a99fcb9b86a3bf"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_af94dcd3387914bfab8a99fcb9b86a3bf"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_af94dcd3387914bfab8a99fcb9b86a3bf"></a>操作名称</p>
</th>
<th class="cellrowborder" valign="top" width="14.34856514348565%" id="mcps1.2.7.1.3"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a8eb8caf538f7477cb2bd9f7b3ff331b9"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a8eb8caf538f7477cb2bd9f7b3ff331b9"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a8eb8caf538f7477cb2bd9f7b3ff331b9"></a>操作风险</p>
</th>
<th class="cellrowborder" valign="top" width="10.02899710028997%" id="mcps1.2.7.1.4"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a35ceee57bace428d8006b9f47830dc8c"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a35ceee57bace428d8006b9f47830dc8c"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a35ceee57bace428d8006b9f47830dc8c"></a>风险等级</p>
</th>
<th class="cellrowborder" valign="top" width="28.257174282571746%" id="mcps1.2.7.1.5"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a78d5a52d12614b52996eedab4c17152a"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a78d5a52d12614b52996eedab4c17152a"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a78d5a52d12614b52996eedab4c17152a"></a>规避措施</p>
</th>
<th class="cellrowborder" valign="top" width="11.71882811718828%" id="mcps1.2.7.1.6"><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a685c7ec384fd4081ab30aa32cda54d80"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a685c7ec384fd4081ab30aa32cda54d80"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a685c7ec384fd4081ab30aa32cda54d80"></a>重大操作观察项目</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_r9f29fffa729b4cef856a23f7643fcf4d"><td class="cellrowborder" rowspan="3" valign="top" width="9.839016098390161%" headers="mcps1.2.7.1.1 "><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a9c28b0c17e9546529917b54547cfa8cf"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a9c28b0c17e9546529917b54547cfa8cf"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_a9c28b0c17e9546529917b54547cfa8cf"></a>运维操作</p>
</td>
<td class="cellrowborder" valign="top" width="25.807419258074194%" headers="mcps1.2.7.1.2 "><p id="p197141628113911"><a name="p197141628113911"></a><a name="p197141628113911"></a>数据库内核升级</p>
</td>
<td class="cellrowborder" valign="top" width="14.34856514348565%" headers="mcps1.2.7.1.3 "><p id="p9714182823913"><a name="p9714182823913"></a><a name="p9714182823913"></a>升级过程中会出现业务闪断。</p>
</td>
<td class="cellrowborder" valign="top" width="10.02899710028997%" headers="mcps1.2.7.1.4 "><p id="p1671416287398"><a name="p1671416287398"></a><a name="p1671416287398"></a>高</p>
</td>
<td class="cellrowborder" valign="top" width="28.257174282571746%" headers="mcps1.2.7.1.5 "><p id="p8714152873919"><a name="p8714152873919"></a><a name="p8714152873919"></a>选择业务低谷升级，升级前对数据库进行全面巡检，提前排除关键指标风险后，与用户沟通好影响和升级时间窗后，再实施升级。</p>
</td>
<td class="cellrowborder" valign="top" width="11.71882811718828%" headers="mcps1.2.7.1.6 "><p id="p27141728133917"><a name="p27141728133917"></a><a name="p27141728133917"></a>观察SQL响应时延、活跃会话数、线程数、动态内存使用率等关键指标。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_zh-cn_topic_0059777750_rba83f8b686b640b4beba9323a3097d29"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p72231853203915"><a name="p72231853203915"></a><a name="p72231853203915"></a>kill进程</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p92231553133916"><a name="p92231553133916"></a><a name="p92231553133916"></a>kill掉dn进程，可能导致业务闪断，甚至触发主备切换，若主备差异较大，RTO风险更大。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p1722315311394"><a name="p1722315311394"></a><a name="p1722315311394"></a>中</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p5223353153918"><a name="p5223353153918"></a><a name="p5223353153918"></a>运维过程中谨慎判断kill进程的必要性，若需要操作，必须提前知会用户。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p5224125363916"><a name="p5224125363916"></a><a name="p5224125363916"></a>观察SQL响应时延、活跃会话数、线程数、动态内存使用率、主备日志差距等关键指标。</p>
</td>
</tr>
<tr id="row370213843918"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p16921443403"><a name="p16921443403"></a><a name="p16921443403"></a>kill会话</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p1869219414402"><a name="p1869219414402"></a><a name="p1869219414402"></a>kill掉会话，可能导致客户端断连，业务中断。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p156927444012"><a name="p156927444012"></a><a name="p156927444012"></a>中</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p196921946405"><a name="p196921946405"></a><a name="p196921946405"></a>运维过程中谨慎判断kill会话的必要性，若需要操作，必须提前知会用户。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p136927474019"><a name="p136927474019"></a><a name="p136927474019"></a>观察SQL响应时延、活跃会话数、线程数、动态内存使用率等关键指标。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_row620571192516"><td class="cellrowborder" rowspan="3" valign="top" width="9.839016098390161%" headers="mcps1.2.7.1.1 "><p id="zh-cn_topic_0283140565_zh-cn_topic_0237088894_p620551122514"><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_p620551122514"></a><a name="zh-cn_topic_0283140565_zh-cn_topic_0237088894_p620551122514"></a>配置修改</p>
</td>
<td class="cellrowborder" valign="top" width="25.807419258074194%" headers="mcps1.2.7.1.2 "><p id="p1230920413411"><a name="p1230920413411"></a><a name="p1230920413411"></a>修改postgres.conf文件</p>
</td>
<td class="cellrowborder" valign="top" width="14.34856514348565%" headers="mcps1.2.7.1.3 "><p id="p173091947418"><a name="p173091947418"></a><a name="p173091947418"></a>若文件中端口等重要配置被修改，可能导致数据库启动不了或连接不上。</p>
</td>
<td class="cellrowborder" valign="top" width="10.02899710028997%" headers="mcps1.2.7.1.4 "><p id="p73091542413"><a name="p73091542413"></a><a name="p73091542413"></a>中</p>
</td>
<td class="cellrowborder" valign="top" width="28.257174282571746%" headers="mcps1.2.7.1.5 "><p id="p1630914484120"><a name="p1630914484120"></a><a name="p1630914484120"></a>禁止手动修改，如需修改请使用相应的数据库操作命令，并在明确风险后修改。</p>
</td>
<td class="cellrowborder" valign="top" width="11.71882811718828%" headers="mcps1.2.7.1.6 "><p id="p14309641413"><a name="p14309641413"></a><a name="p14309641413"></a>无</p>
</td>
</tr>
<tr id="row712319134116"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p15612820194117"><a name="p15612820194117"></a><a name="p15612820194117"></a>修改pg_hba.conf文件</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p126120206414"><a name="p126120206414"></a><a name="p126120206414"></a>若文件中的互信规则被修改，可能导致数据库被攻击或客户端无法建连。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p13612172013412"><a name="p13612172013412"></a><a name="p13612172013412"></a>高</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p1961252034116"><a name="p1961252034116"></a><a name="p1961252034116"></a>禁止手动修改，如需修改请使用gs_guc命令，并在明确风险后修改。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p261232034116"><a name="p261232034116"></a><a name="p261232034116"></a>无</p>
</td>
</tr>
<tr id="row1951210531401"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p220529154112"><a name="p220529154112"></a><a name="p220529154112"></a>修改部分数据库配置参数</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p5201429134116"><a name="p5201429134116"></a><a name="p5201429134116"></a>部分参数若修改不恰当，会导致数据库发生预期外的行为，包括但不限于语句时延上涨、内存上涨、业务连接报错等。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p220132919413"><a name="p220132919413"></a><a name="p220132919413"></a>中</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p182092920416"><a name="p182092920416"></a><a name="p182092920416"></a>参数修改前，请详细阅读产品文档说明，并准确评估影响后，再实施，若无法评估影响，请联系华为工程师支持。</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p8206295410"><a name="p8206295410"></a><a name="p8206295410"></a>观察SQL响应时延、CPU使用率、内存使用率等关键指标。</p>
</td>
</tr>
<tr id="row8332772399"><td class="cellrowborder" valign="top" width="9.839016098390161%" headers="mcps1.2.7.1.1 "><p id="p13926240194112"><a name="p13926240194112"></a><a name="p13926240194112"></a>DDL变更</p>
</td>
<td class="cellrowborder" valign="top" width="25.807419258074194%" headers="mcps1.2.7.1.2 "><p id="p092644024119"><a name="p092644024119"></a><a name="p092644024119"></a>用户执行DDL操作</p>
</td>
<td class="cellrowborder" valign="top" width="14.34856514348565%" headers="mcps1.2.7.1.3 "><p id="p1926134012416"><a name="p1926134012416"></a><a name="p1926134012416"></a>大部分DDL语句会拿高级别锁，阻塞查询和DML语句，导致业务长时间阻塞。</p>
</td>
<td class="cellrowborder" valign="top" width="10.02899710028997%" headers="mcps1.2.7.1.4 "><p id="p159266407417"><a name="p159266407417"></a><a name="p159266407417"></a>高</p>
</td>
<td class="cellrowborder" valign="top" width="28.257174282571746%" headers="mcps1.2.7.1.5 "><p id="p99271140144112"><a name="p99271140144112"></a><a name="p99271140144112"></a>执行DDL前谨慎评估影响，尽量离线操作，若无法离线操作，尽量通过等锁时长等参数，减少等待时间，避免DDL阻塞业务。</p>
</td>
<td class="cellrowborder" valign="top" width="11.71882811718828%" headers="mcps1.2.7.1.6 "><p id="p292734044113"><a name="p292734044113"></a><a name="p292734044113"></a>观察SQL响应时延、活跃会话数、线程数、动态内存使用率等关键指标。</p>
</td>
</tr>
</tbody>
</table>

