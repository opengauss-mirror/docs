# 行列转换

openGaus行列转换特性在主备场景下，通过备节点的行列双格式内存模式，通过高效行列转换技术方案，备节点同步主节点在OLTP场景下大量的行数据变更至列缓存；并支持备节点通过列缓存查询，从而提升大型复杂OLAP场景下的数据分析，使数据库同时具备较强的TP和AP能力。


## 使用指导
行列转换特性支持用户针对全表、表指定列、指定分区进行行列转换及清除已有列缓存操作。

-   **对指定行表进行行列转换**
    -   **转换方式1：全表转换**
        ```
        ALTER TABLE table_name IMCSTORED;
        ```
    -   **转换方式2：表部分列转换**
        ```
        ALTER TABLE table_name IMCSTORED（column_name）;
        ```
    -   **转换方式3：对分区表的指定分区转换**
        ```
        ALTER TABLE table_name MODIFY PARTITION partition_name IMCSTORED;
        ```
-   **清除已转换的列缓存**
    -   **清除方式1：对指定行表做全量列缓存清除**
        ```
        ALTER TABLE table_name UNIMCSTORED;
        ```
    -   **清除方式2：对分区表的指定分区做列缓存清除**
        ```
        ALTER TABLE table_name MODIFY PARTITION partition_name UNIMCSTORED;
        ```
## 参数说明<a name="section415419560710"></a>

-   **table\_name**

    要转换的表名。
-   **column\_name**

    指定表中要行转列的字段名。

-   **partition\_name**

    要转换的分区名。

## 示例<a name="zh-cn_topic_0283136734_zh-cn_topic_0237120296_zh-cn_topic_0066331191_zh-cn_topic_0059778293_s05b88010070445598ab2a86454e5d88b"></a>

对已创建的行存表进行行列转换。例如：

```
--创建表
openGauss=# CREATE TABLE test
(
  id   INT,
  name VARCHAR2(40),
  dept_id    INT
);

CREATE TABLE

--对该表进行行列转换
openGauss=# ALTER TABLE test IMCSTORED;
ALTER TABLE

--对该表清除列缓存
openGauss=# ALTER TABLE test UNIMCSTORED;
ALTER TABLE

--对该表部分列进行行列转换
openGauss=# ALTER TABLE test IMCSTORED（id);
ALTER TABLE
```

