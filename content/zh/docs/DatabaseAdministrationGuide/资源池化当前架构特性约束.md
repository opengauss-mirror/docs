# 资源池化当前架构特性约束

## 内容简介

openGauss资源池化是openGauss推出的一种新型的集群架构.通过DMS和DSS组件,实现集群中多个节点的底层存储数据共享和节点间的内存实时共享，达到节省底层存储资源以及集群内部支持一写多读且可以实时一致性读的目的。
本文主要介绍资源池化当前的架构下对数据库的一些特性约束。

## 当前的一些约束说明
- 下面是资源池化当前的架构下对数据库的一些特性约束的说明, 需要注意的是**当前的约束不代表以后一直不支持**, 只是出于当前版本设计上的考虑, 做出的一些约束。
  
| 编号 |  约束说明 | 补充说明 |
|:--:|:--|:--|
| 1 | 仅支持段页式存储, 不支持页式 | 建表语句需要带上with (segment = on, xxx) |
| 2 | 不支持列存表 | 无 |
| 3 | 不支持FDW | 无 |
| 4 | 不支持unlogged表 | 无 |
| 5 | 不支持本地临时表和全局临时表 | 无 |
| 6 | 不支持带压缩的特性 | 无 |
| 7 | 不支持物化视图 | 无 |
| 8 | 备机不支持写语句的操作 | 开启写转发特性后，备机可以支持接收写语句，然后转发到主机执行，详情请参考写转发特性说明（文档搜索“备机支持写语句参数”） |
| 9 | 使用OM安装时仅支持磁阵方式部署, 不支持ceph, 不支持虚拟化存储池 | 无 |
| 10 | 不支持发布订阅 | 无 |
| 11 | 不支持传统主备架构同时部署 | 即同一套集群不能既使用资源池化主备, 又配上传统主备 |
| 12 | 不支持ustore | 也不支持闪回，因为闪回只支持ustore |
| 13 | 单个xlog的文件大小从16MB调整成了1G | 回收机制也适配了1G, pg_xlogdump工具也进行了适配 |
| 14 | 不建议关闭global syscache | 默认是打开的, 通过配置项可以关闭, 关闭后高并发下目前可能导致连接变慢 |
| 15 | 创建表空间时，不支持指定绝对路径 |
| 16 | 有条件的支持逻辑复制 | pg_replslot目录放在了底层共享存储里，但在failover场景下，会因为主备xlog目录的切换导致逻辑复制找不到restart lsn, 所以如果使用了逻辑复制，在failover场景下，得手动重建逻辑复制槽 |