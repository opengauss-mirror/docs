# 延迟进入最大可用模式

## 可获得性<a name="section118411122194813"></a>

本特性自openGauss 3.0.0版本开始引入。

## 特性简介<a name="section13375160194919"></a>

支持主机延迟进入最大可用模式。

## 客户价值<a name="section19340161511499"></a>

当主机与同步备机之间的网络不稳定或其他原因导致主机感知到备机退出，且主机打开最大可用模式配置时，在一定时间窗内仍维持主机在最大保护模式的状态，超出该时间窗口后，主机进入到最大可用模式。

可以避免因网络抖动、进程闪断等因素导致主机在最大保护模式和最大可用模式之间频繁来回切换。

## 特性描述<a name="section54601932194912"></a>

当最大可用模式most\_available\_sync配置为on，在主备场景下，当存在同步备发生故障，导致不满足当前所配置的同步备数量（详细可参考synchronous\_standby\_names的含义）时，如果配置了keep\_sync\_window参数，则在keep\_sync\_window设置的时间窗口内，继续保持最大保护模式，即阻塞主机的事务提交，延缓进入最大可用模式的时间。

若在keep\_sync\_window超时窗口内，同步备机故障恢复，且满足当前所配置的同步备数量，则不阻塞事务，恢复到正常状态。

## 特性增强<a name="section1658716245019"></a>

无。

## 特性约束<a name="section13118121915014"></a>

-   该特性仅在最大可用模式打开的前提下生效。

-   启用该特性可能会对RPO造成影响, 若主机在所配置的超时时间窗口内发生故障，主机的事务只在本地提交，未同步到故障的同步备机。

-   该特性不适用于级联备机。


## 依赖关系<a name="section24082349505"></a>

依赖最大可用模式。
