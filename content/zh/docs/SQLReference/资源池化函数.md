# 资源池化的函数<a name="ZH-CN_TOPIC_0289900393"></a>

- ss_buffer_ctrl()

    描述：显示buffer对应的buf_ctrl上记录的信息
    
    返回值类型：record
    
    示例1：查询特定的buffer的buf_ctrl信息
    
    ```
    openGauss=# select * from ss_buffer_ctrl() where bufferid = 20;
    bufferid | is_remote_dirty | lock_mode | is_edp | force_request | need_flush | buf_id | state | pblk_relno | pblk_blkno | pblk_lsn | seg_fileno | seg_blockno
    ----------+-----------------+-----------+--------+---------------+------------+--------+-------+------------+------------+----------+------------+-------------
    20 | 0 | 1 | 0 | 0 | 0 | 19 | 32 | 0 | 4294967295 | 0 | 2 | 4375
    (1 row)
    ```

    示例2：查询DMS页面分布式锁不为NULL的buffer数量

    ```
   openGauss=#  select count(*) from ss_buffer_ctrl() where lock_mode > 0;
  count
  -------
    258
   (1 row)
  ```

- ss_txnstatus_cache_stat()

    描述：返回事务信息缓存和事务信息获取的相关统计信息。注意相关count统计项并不是精确值，本统计函数的目的是性能调优分析，而非精确统计。  

    返回值类型：record  
    vcache_gets：事务信息从变量缓存获取的次数  
    hcache_gets：事务信息从哈希缓存获取的次数  
    nio_gets：事务信息从网络I/O获取的次数  
    avg_hcache_gettime_us：从哈希缓存获取的平均耗时，单位us  
    avg_nio_gettime_us：从网络I/O获取的平均耗时，单位us  
    cache_hit_rate：缓存命中率  
    hcache_eviction：缓存淘汰计数  
    avg_eviction_refcnt：每个缓存条目被淘汰前的平均被引用次数  

    示例: 主备TPCC写/读，备机查询事务信息缓存统计项。

    ```
    openGauss=# select * from ss_txnstatus_cache_stat();
    vcache_gets | hcache_gets | nio_gets | avg_hcache_gettime_us | avg_nio_gettime_us | cache_hit_rate | hcache_eviction | avg_eviction_refcnt
    -------------+-------------+----------+-----------------------+--------------------+-----------------+-----------------+---------------------
    263809 | 782159 | 275012 | 1.73883698838727 | 756.186410047562 | .79181213947221 | 0 | 0
    (1 row)
    ```

