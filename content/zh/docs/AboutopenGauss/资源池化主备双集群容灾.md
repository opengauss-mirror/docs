# 资源池化主备双集群容灾

## 特性简介

本特性实现主备双集群的xlog日志同步，保证主备双集群的xlog一致性，从而增强主备双集群的容灾能力，降低存储空间，并保证主备集群内节点切换、主备集群间切换功能正常。
本特性分为两种模式:
1. 基于网络的流复制模式：[资源池化网络双集群部署](../../../zh/docs/DatabaseAdministrationGuide/资源池化网络双集群部署.md)
2. 基于DORADO存储的同步复制模式：[资源池化DORADO双集群部署](../../../zh/docs/DatabaseAdministrationGuide/资源池化DORADO双集群部署.md)

## 可获得性

基于流复制的主备双集群容灾自openGauss 6.0.0-RC1版本开始引入。

基于DORADO存储同步复制的主备双集群容灾自openGauss 5.1.0版本开始引入。

## 客户价值

提供给客户在极端灾难情况下数据的安全性和服务的可用性，多种模式满足不同场景下的需求。

## 特性描述

资源池化双集群容灾通过多种同步方式将主机群的xlog日志同步至备集群，备集群通过回放来自主机群的xlog实现数据一致性，以便于主机群发生严重故障时，备集群可以及时接管主集群业务。

基于流复制的主备双集群，利用openGauss传统集群中的xlog物理复制能力，能够灵活的配置主备集群间的复制关系，适用于同城或异地容灾场景。

基于DORADO复制的主备双集群容灾，利用了DORADO存储设备同步复制的能力，主机群xlog写入后，在链路正常的情况下，备集群可以读取到同样的xlog，适用于百公里级别的同城双中心容灾场景，传输速度快，典型业务场景下，在一个集群完全故障的情况下，RPO = 0，RT0 < 30s。

## 特性增强

1.主备集群间极致RTO
    在30万tpmc下，集群间极致RTO时间小于20s。
    
    使用限制: (1)本特性自openGauss 6.0.0-RC1版本开始引入，只适用于资源池化部署的基于DORADO存储同步复制的主备双集群。
              (2)只适用于主备集群间切换，不适用于集群内切换。
              (3)开启极致RTO的情况下，备集群不支持读业务。
    
    使用说明: (1)备集群配置极致RTO参数，关闭备机可读。
              (2)在主集群故障的场景下，备集群升为主集群。
              (3)在30万tpmc下，集群间极致RTO时间小于20s。

## 特性约束

双集群方案下，不支持按需回放。
不支持两种双集群同时使用。

## 依赖关系

本特性依赖openGauss资源池化架构。
本特性依赖DORADO存储设备。



