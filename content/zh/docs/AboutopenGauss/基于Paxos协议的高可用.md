# 基于Paxos协议的高可用

## 可获得性<a name="section57017810"></a>

本特性自openGauss 2.1.0 版本开始引入。

## 特性简介<a name="section118751332337"></a>

DCF模式开关开启后，数据库节点可以支持基于Paxos协议的复制与仲裁能力。数据库节点基于Paxos的自选主及日志复制，复制过程中支持压缩及流控，防止带宽占用过高。提供基于Paxos多种角色的节点类型，并能够进行调整。支持查询当前数据库实例的状态。

## 特性描述<a name="section73081759173318"></a>

-   DCF进行日志复制时，支持对日志进行压缩后再传输，减小对网络带宽的占用。
-   DCF支持passive角色节点类型，passive节点不参与选举，只做日志的同步以及回放，该类型节点在高负载的情况下，日志同步会做流控。
-   DCF支持logger角色节点，logger节点可以参与选举和投票，但是只复制DCF的日志，不复制xlog，不进行redo。
-   DCF的follower和passive角色可以在线互换，即不中断业务的情况下，follower角色的节点转化为passive角色，passive角色的节点转化为follower。
-   DCF支持少数派强起能力，在数据库实例多数派故障的情况下，从正常的备节点中选择少数派模式强启成为主节点，其余正常的备节点从主节点复制日志。
-   DCF支持自选主能力，在原主节点故障的场景下，在保证数据一致性的前提下，剩余备节点自动选出新的主节点。

## 特性增强<a name="section29043486"></a>

无。

## 特性约束<a name="section27741012910"></a>

若使用此功能，在安装部署阶段需要开启DCF开关。

## 依赖关系<a name="section57771982"></a>

无。

