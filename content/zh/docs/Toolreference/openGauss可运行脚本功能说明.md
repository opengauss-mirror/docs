# openGauss可运行脚本功能说明<a name="ZH-CN_TOPIC_0000001258392839"></a>

以下是openGauss常用可执行脚本，仅供openGauss接口使用。

**表 1**  脚本功能说明

<a name="table885801545614"></a>
<table><thead align="left"><tr id="row108591015155615"><th class="cellrowborder" valign="top" width="28.17%" id="mcps1.2.3.1.1"><p id="p14859191510565"><a name="p14859191510565"></a><a name="p14859191510565"></a>脚本明成</p>
</th>
<th class="cellrowborder" valign="top" width="71.83%" id="mcps1.2.3.1.2"><p id="p178593153569"><a name="p178593153569"></a><a name="p178593153569"></a>功能说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row185911515618"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1285919159567"><a name="p1285919159567"></a><a name="p1285919159567"></a>UpgradeUtility.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p18859121512566"><a name="p18859121512566"></a><a name="p18859121512566"></a>升级工具。</p>
</td>
</tr>
<tr id="row88592015165616"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p15041394508"><a name="p15041394508"></a><a name="p15041394508"></a>KerberosUtility.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p385921518569"><a name="p385921518569"></a><a name="p385921518569"></a>安装/卸载kerberos认证方式。</p>
</td>
</tr>
<tr id="row148591515135616"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p10859715145616"><a name="p10859715145616"></a><a name="p10859715145616"></a>Uninstall.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p386071505617"><a name="p386071505617"></a><a name="p386071505617"></a>卸载数据库数据库实例。</p>
</td>
</tr>
<tr id="row2860201519569"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p4137712135019"><a name="p4137712135019"></a><a name="p4137712135019"></a>LocalCheck.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p2860111585620"><a name="p2860111585620"></a><a name="p2860111585620"></a>本地节点检查。</p>
</td>
</tr>
<tr id="row4860191555611"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p15216111510506"><a name="p15216111510506"></a><a name="p15216111510506"></a>Install.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p286091517566"><a name="p286091517566"></a><a name="p286091517566"></a>安装数据库节点实例。</p>
</td>
</tr>
<tr id="row4860181511566"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1614065664517"><a name="p1614065664517"></a><a name="p1614065664517"></a>CheckUninstall.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p111411156124512"><a name="p111411156124512"></a><a name="p111411156124512"></a>检查节点是否已卸载。</p>
</td>
</tr>
<tr id="row3860161575619"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p38613150565"><a name="p38613150565"></a><a name="p38613150565"></a>PreInstallUtility.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1430274613192"><a name="p1430274613192"></a><a name="p1430274613192"></a>前置工具。</p>
</td>
</tr>
<tr id="row19861161565619"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p65611504483"><a name="p65611504483"></a><a name="p65611504483"></a>CleanInstance.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p586116157567"><a name="p586116157567"></a><a name="p586116157567"></a>删除数据库实例。</p>
</td>
</tr>
<tr id="row148616151568"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p44229547486"><a name="p44229547486"></a><a name="p44229547486"></a>CleanOsUser.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p168611915165610"><a name="p168611915165610"></a><a name="p168611915165610"></a>删除节点Osuser。</p>
</td>
</tr>
<tr id="row4861121535611"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p586113156561"><a name="p586113156561"></a><a name="p586113156561"></a>Resetreplconninfo.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1086191518561"><a name="p1086191518561"></a><a name="p1086191518561"></a>是用于重置本地 Replconninfo。</p>
</td>
</tr>
<tr id="row18861615155615"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p168612151566"><a name="p168612151566"></a><a name="p168612151566"></a>LocalPerformanceCheck.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p11861161514566"><a name="p11861161514566"></a><a name="p11861161514566"></a>检查SSD信息。</p>
</td>
</tr>
<tr id="row486191525613"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1386110151560"><a name="p1386110151560"></a><a name="p1386110151560"></a>CheckUpgrade.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p28611415155610"><a name="p28611415155610"></a><a name="p28611415155610"></a>升级之前检查节点环境变量。</p>
</td>
</tr>
<tr id="row19861201513568"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p486281517563"><a name="p486281517563"></a><a name="p486281517563"></a>InitInstance.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p28621215185610"><a name="p28621215185610"></a><a name="p28621215185610"></a>初始化数据库。</p>
</td>
</tr>
<tr id="row1986217157569"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p11862015195614"><a name="p11862015195614"></a><a name="p11862015195614"></a>Backup.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p286211155566"><a name="p286211155566"></a><a name="p286211155566"></a>备份二进制文件和参数文件。</p>
</td>
</tr>
<tr id="row15862115105611"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p78622015125611"><a name="p78622015125611"></a><a name="p78622015125611"></a>ConfigInstance.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1527104819480"><a name="p1527104819480"></a><a name="p1527104819480"></a>配置数据库实例。</p>
</td>
</tr>
<tr id="row128621815135610"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p3862515185615"><a name="p3862515185615"></a><a name="p3862515185615"></a>CheckConfig.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p0143629122314"><a name="p0143629122314"></a><a name="p0143629122314"></a>检查节点配置信息。</p>
</td>
</tr>
<tr id="row686241515569"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p68621815175611"><a name="p68621815175611"></a><a name="p68621815175611"></a>ConfigHba.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1373744194816"><a name="p1373744194816"></a><a name="p1373744194816"></a>配置pghba.cong文件等。</p>
</td>
</tr>
<tr id="row178621415165614"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p198622154562"><a name="p198622154562"></a><a name="p198622154562"></a>ExecuteSql.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p5862111515562"><a name="p5862111515562"></a><a name="p5862111515562"></a>执行数据库sql命令。</p>
</td>
</tr>
<tr id="row6862191515562"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1786271511562"><a name="p1786271511562"></a><a name="p1786271511562"></a>LocalCheckOS.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p782611615011"><a name="p782611615011"></a><a name="p782611615011"></a>检查本地OS信息。</p>
</td>
</tr>
<tr id="row14863111515561"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p19863915105612"><a name="p19863915105612"></a><a name="p19863915105612"></a>UnPreinstallUtility.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1425194015517"><a name="p1425194015517"></a><a name="p1425194015517"></a>清除前置过程中的配置。</p>
</td>
</tr>
<tr id="row15863161510567"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1863121545613"><a name="p1863121545613"></a><a name="p1863121545613"></a>CheckPreinstall.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1786313157563"><a name="p1786313157563"></a><a name="p1786313157563"></a>检查节点是否已进行前置。</p>
</td>
</tr>
<tr id="row78631415125610"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p8863315185610"><a name="p8863315185610"></a><a name="p8863315185610"></a>CheckInstall.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p929729154711"><a name="p929729154711"></a><a name="p929729154711"></a>检查节点安装信息。</p>
</td>
</tr>
<tr id="row16863131517561"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p19863815195613"><a name="p19863815195613"></a><a name="p19863815195613"></a>GaussStat.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p11322101713466"><a name="p11322101713466"></a><a name="p11322101713466"></a>统计数据库中的节点信息。</p>
</td>
</tr>
<tr id="row8863141545617"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p3863515105611"><a name="p3863515105611"></a><a name="p3863515105611"></a>CheckPythonVersion.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p18631815105615"><a name="p18631815105615"></a><a name="p18631815105615"></a>检查python版本。</p>
</td>
</tr>
<tr id="row486316157562"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p118636154566"><a name="p118636154566"></a><a name="p118636154566"></a>expect.sh</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p8863315175611"><a name="p8863315175611"></a><a name="p8863315175611"></a>自动输入交互密码。</p>
</td>
</tr>
<tr id="row11863181515620"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1086319156564"><a name="p1086319156564"></a><a name="p1086319156564"></a>CheckSshAgent.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p3864181585620"><a name="p3864181585620"></a><a name="p3864181585620"></a>负责保护ssh互信中的ssh-agent进程，互信进程保护工具。</p>
</td>
</tr>
<tr id="row086401515617"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p886412151564"><a name="p886412151564"></a><a name="p886412151564"></a>LocalCollect.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p18649157569"><a name="p18649157569"></a><a name="p18649157569"></a>收集本地的文件信息及参数信息。</p>
</td>
</tr>
<tr id="row1086417156569"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p188641115185619"><a name="p188641115185619"></a><a name="p188641115185619"></a>killall</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p128644153563"><a name="p128644153563"></a><a name="p128644153563"></a><span>killall是</span><span>系统不存在killall命令时供om使用的自研工具，其替代部分系统killall功能</span>。</p>
</td>
</tr>
<tr id="row786421525615"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p178641153564"><a name="p178641153564"></a><a name="p178641153564"></a>transfer.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p12864181520561"><a name="p12864181520561"></a><a name="p12864181520561"></a>用于将C函数lib文件传输到所有节点或备用节点。</p>
</td>
</tr>
<tr id="row286411515618"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p208641415155619"><a name="p208641415155619"></a><a name="p208641415155619"></a>Restore.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p286412156560"><a name="p286412156560"></a><a name="p286412156560"></a>恢复二进制文件和参数文件。</p>
</td>
</tr>
<tr id="row583816415594"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1283984125911"><a name="p1283984125911"></a><a name="p1283984125911"></a>StartInstance.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1983944112597"><a name="p1983944112597"></a><a name="p1983944112597"></a>用于启动数据库。</p>
</td>
</tr>
<tr id="row4553125965915"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1455425945918"><a name="p1455425945918"></a><a name="p1455425945918"></a>StopInstance.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p12554759195918"><a name="p12554759195918"></a><a name="p12554759195918"></a>用于停止数据库。</p>
</td>
</tr>
<tr id="row22574445012"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p7258174414015"><a name="p7258174414015"></a><a name="p7258174414015"></a>py_pstree.py</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1725874414016"><a name="p1725874414016"></a><a name="p1725874414016"></a>用于杀死进程。</p>
</td>
</tr>
<tr id="row13105204518486"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p20106245154815"><a name="p20106245154815"></a><a name="p20106245154815"></a>install.sh</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p6106245114820"><a name="p6106245114820"></a><a name="p6106245114820"></a>单节点安装脚本。</p>
</td>
</tr>
<tr id="row12836719115218"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p158372019155214"><a name="p158372019155214"></a><a name="p158372019155214"></a>one_master_one_slave.sh</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1983761912525"><a name="p1983761912525"></a><a name="p1983761912525"></a>一主一备一键安装脚本。</p>
</td>
</tr>
<tr id="row13298218533"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p183291625535"><a name="p183291625535"></a><a name="p183291625535"></a>sshexkey_encrypt_tool.sh</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p11329192145313"><a name="p11329192145313"></a><a name="p11329192145313"></a>负责用ssh-keygen命令生成秘钥文件（经过密码短语加密）的脚本，互信工具专用。</p>
</td>
</tr>
<tr id="row1948192145516"><td class="cellrowborder" valign="top" width="28.17%" headers="mcps1.2.3.1.1 "><p id="p1758205991216"><a name="p1758205991216"></a><a name="p1758205991216"></a>ssh-agent.sh</p>
</td>
<td class="cellrowborder" valign="top" width="71.83%" headers="mcps1.2.3.1.2 "><p id="p1894882145512"><a name="p1894882145512"></a><a name="p1894882145512"></a>负责拉起ssh-agent进程的shell脚本，互信模块专用。</p>
</td>
</tr>
</tbody>
</table>

