# 平台和客户端兼容性<a name="ZH-CN_TOPIC_0289900474"></a>

很多平台都使用数据库系统，数据库系统的对外兼容性给平台提供了很大的方便。

## convert\_string\_to\_digit<a name="zh-cn_topic_0283137548_zh-cn_topic_0237124743_zh-cn_topic_0059778871_s522001c800824f5fb1ef55596037d4d3"></a>

**参数说明**：设置隐式转换优先级，是否优先将字符串转为数字。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**布尔型

-   on表示优先将字符串转为数字。
-   off表示不优先将字符串转为数字。

**默认值**：on

>![](public_sys-resources/icon-notice.gif) **须知：**
>该参数调整会修改内部数据类型转换规则，导致不可预期的行为，请谨慎操作。

## nls\_timestamp\_format<a name="zh-cn_topic_0283137548_zh-cn_topic_0237124743_zh-cn_topic_0059778871_sd50fac6da781483cae15aaa57243b88e"></a>

**参数说明**：设置时间戳默认格式。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围**：字符串

**默认值**：DD-Mon-YYYY HH:MI:SS.FF AM

## group\_concat\_max\_len<a name="section658203291811"></a>

**参数说明：**搭配函数GROUP\_CONCAT使用，限制其返回值长度，超长截断。

该参数属于USERSET类型参数，请参考表[表1](重设参数.md#zh-cn_topic_0283137176_zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**0-9223372036854775807

**默认值：**1024

>![](public_sys-resources/icon-note.gif) **说明：** 
>目前能返回的最大长度是1073741823，超出此长度后会有out of memory的报错。

## max\_function\_args<a name="zh-cn_topic_0283137548_zh-cn_topic_0237124743_zh-cn_topic_0059778871_s1a3d3c95fbda4e20a65cb3400cf6a418"></a>

**参数说明**：函数参数最大个数。

该参数属于INTERNAL类型参数，为固定参数，用户无法修改此参数，只能查看。

**取值范围**：整型

**默认值**：8192

## transform\_null\_equals<a name="zh-cn_topic_0283137001_zh-cn_topic_0237124738_zh-cn_topic_0059779195_s08818c8140cf437196068571d8291e0e"></a>

**参数说明：**控制表达式expr = NULL（或NULL = expr）当做expr IS NULL处理。如果expr得出NULL值则返回真，否则返回假。

-   正确的SQL标准兼容的expr = NULL总是返回NULL（未知）。
-   Microsoft Access里的过滤表单生成的查询使用expr = NULL来测试空值。打开这个选项，可以使用该接口来访问数据库。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**布尔型

-   on表示控制表达式expr = NULL（或NULL = expr）当做expr IS NULL处理。
-   off表示不控制，即expr = NULL总是返回NULL（未知）。

**默认值：**off

>![](public_sys-resources/icon-note.gif) **说明：** 
>新用户经常在涉及NULL的表达式上语义混淆，故默认值设为off。

## support\_extended\_features<a name="zh-cn_topic_0283137001_zh-cn_topic_0237124738_zh-cn_topic_0059779195_s1b60ec6dbc79490bbadf5dd62ba2538c"></a>

**参数说明：**控制是否支持数据库的扩展特性。

该参数属于POSTMASTER类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**布尔型

-   on表示支持数据库的扩展特性。
-   off表示不支持数据库的扩展特性。

**默认值：**off

## sql\_compatibility<a name="section585105311613"></a>

**参数说明：**控制数据库的SQL语法和语句行为同哪一个主流数据库兼容。

该参数属于INTERNAL类型参数，用户无法修改，只能查看。

**取值范围：**枚举型

-   A表示同O数据库兼容。
-   B表示同MY数据库兼容。
-   C表示同TD数据库兼容。
-   PG表示同POSTGRES数据库兼容。

**默认值：**A

>![](public_sys-resources/icon-notice.gif) **须知：** 
>
>-   该参数只能在执行[CREATE DATABASE](../SQLReference/create-database.md)命令创建数据库时通过dbcompatibility设置。
>
>-   在数据库中，该参数只能是确定的一个值，要么始终设置为A，要么始终设置为B，请勿任意改动，否则会导致数据库行为不一致。

## b\_format\_behavior\_compat\_options<a name="section533544693812"></a>

**参数说明：**数据库B模式兼容性行为配置项，该参数的值由若干个配置项用逗号隔开构成。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0283137176_zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**字符串

**默认值：**""

>![](public_sys-resources/icon-note.gif) **说明：** 
>
>-   当前只支持[表1 兼容性B模式配置项](#table18793103274617)。
>-   配置多个兼容性配置项时，相邻配置项用逗号隔开，例如：set b\_format\_behavior\_compat\_options='enable\_set\_variables,set\_session\_transaction';

**表 1**  兼容性B模式配置项

<a name="table18793103274617">

<table><thead align="left"><tr id="row1579333264613"><th class="cellrowborder" valign="top" width="32.34%" id="mcps1.2.3.1.1"><p id="p07933328468"><a name="p07933328468"></a><a name="p07933328468"></a>兼容性配置项</p>
</th>
<th class="cellrowborder" valign="top" width="67.66%" id="mcps1.2.3.1.2"><p id="p979416323463"><a name="p979416323463"></a><a name="p979416323463"></a>兼容性行为控制</p>
</th>
</tr>
</thead>
<tbody><tr id="row77941232134613"><td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.2.3.1.1 "><p id="p879473220468"><a name="p879473220468"></a><a name="p879473220468"></a>enable_set_variables</p>
</td>
<td class="cellrowborder" valign="top" width="67.66%" headers="mcps1.2.3.1.2 "><p id="p7794183213469"><a name="p7794183213469"></a><a name="p7794183213469"></a>set语法增强控制开关。</p>
<a name="ul38361318484"></a><a name="ul38361318484"></a><ul id="ul38361318484"><li>不设置此配置时，不支持set自定义变量、set [global | session]语法。</li><li>设置此配置时，支持B兼容模式下使用上述语法，比如<em id="i183671214675"><a name="i183671214675"></a><a name="i183671214675"></a> set @v1 = 1；</em>。</li></ul>
</td>
</tr>
<tr id="row12943246105218"><td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.2.3.1.1 "><p id="p1776695014013"><a name="p1776695014013"></a><a name="p1776695014013"></a>set_session_transaction</p>
</td>
<td class="cellrowborder" valign="top" width="67.66%" headers="mcps1.2.3.1.2 "><p id="p1876695010405"><a name="p1876695010405"></a><a name="p1876695010405"></a>set session transaction控制开关。</p>
<a name="ul69801121174211"></a><a name="ul69801121174211"></a><ul id="ul69801121174211"><li>不设置此配置时，set session transaction等效于set local transaction。</li><li>设置此配置时，支持B兼容模式下使用上述语法，修改当前会话事务特性。</li></ul>
</td>
</tr>
<tr id="row63441281383"><td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.2.3.1.1 "><p id="p174301440881"><a name="p174301440881"></a><a name="p174301440881"></a>enable_modify_column</p>
</td>
<td class="cellrowborder" valign="top" width="67.66%" headers="mcps1.2.3.1.2 "><p id="p7344102813820"><a name="p7344102813820"></a><a name="p7344102813820"></a>ALTER TABLE MODIFY语义控制开关。</p>
<a name="ul1259015399910"></a><a name="ul1259015399910"></a><ul id="ul1259015399910"><li>不设置此配置时，“ALTER TABLE table_name MODIFY column_name data_type;”只修改列的数据类型。</li><li>设置此配置时，“ALTER TABLE table_name MODIFY column_name data_type;”修改整个列定义。</li></ul>
</td>
</tr>
<tr id="row1090841018233"><td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.2.3.1.1 "><p id="p10908141017237"><a name="p10908141017237"></a><a name="p10908141017237"></a>default_collation</p>
</td>
<td class="cellrowborder" valign="top" width="67.66%" headers="mcps1.2.3.1.2 "><p id="p7908710152316"><a name="p7908710152316"></a><a name="p7908710152316"></a>默认字符序前向兼容开关。</p>
<a name="ul101812393239"></a><a name="ul101812393239"></a><ul id="ul101812393239"><li>不设置此配置时，在未显式指定字符类型字段的字符集或字符序且表级字符序也为空时，字段为default字符序。</li><li>设置此配置时，字符类型字段的字符序当表级字符序不为空时继承表级字符序，为空时设置为数据库编码对应的默认字符序。</li></ul>
</td>
</tr>
</tbody>
</table>

## enable_set_variable_b_format<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_section1980108261141"></a>

**参数说明：**在MY数据库模式下是否支持自定义用户变量的功能。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**布尔型

- on表示在MY数据库模式下支持自定义用户变量。
- off表示在MY数据库模式下不支持自定义用户变量。

## behavior\_compat\_options<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_section1980124735516"></a>

**参数说明：**数据库兼容性行为配置项，该参数的值由若干个配置项用逗号隔开构成。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**字符串

**默认值：**空

>![](public_sys-resources/icon-note.gif) **说明：** 
>
>-   当前只支持[表1](#zh-cn_topic_0283137574_zh-cn_topic_0237124754_table182861153114812)。
>
>-   配置多个兼容性配置项时，相邻配置项用逗号隔开，例如：set behavior\_compat\_options='end\_month\_calculate,display\_leading\_zero';

**表 1**  兼容性配置项

<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_table182861153114812"></a>
<table><thead align="left"><tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row1128619535483"><th class="cellrowborder" valign="top" width="24.43%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p192861053194814"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p192861053194814"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p192861053194814"></a><strong id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_b711224504"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_b711224504"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_b711224504"></a>兼容性配置项</strong></p>
</th>
<th class="cellrowborder" valign="top" width="75.57000000000001%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p10286553144814"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p10286553144814"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p10286553144814"></a><strong id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_b18416212503"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_b18416212503"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_b18416212503"></a>兼容性行为控制</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row2028605318483"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p152861153174819"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p152861153174819"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p152861153174819"></a>display_leading_zero</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p192848725515"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p192848725515"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p192848725515"></a>浮点数显示配置项。控制数值类型中浮点类型、任意精度类型的小数点前零显示。并且length计算数字长度同步显示。</p>
<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul11299194763811"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul11299194763811"></a><ul id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul11299194763811"><li>不设置此配置项时，对于-1~0和0~1之间的小数，不显示小数点前的0。比如：<a name="screen182721311065"></a><a name="screen182721311065"></a><pre class="screen" codetype="Sql" id="screen182721311065"><span id="text4155232185511"><a name="text4155232185511"></a><a name="text4155232185511"></a>openGauss=# </span>select 0.1231243 as a, 0.1231243::numeric as b,0.1231243::integer(10,3) as c, length(0.1242343) as d;
    a     |    b     |  c   | d
----------+----------+------+---
 .1231243 | .1231243 | .123 | 8
(1 row)</pre>
</li><li>设置此配置项时，对于-1~0和0~1之间的小数，显示小数点前的0。比如：<a name="screen15439342065"></a><a name="screen15439342065"></a><pre class="screen" codetype="Sql" id="screen15439342065"><span id="text1157813919323"><a name="text1157813919323"></a><a name="text1157813919323"></a>openGauss=# </span>select 0.1231243 as a, 0.1231243::numeric as b,0.1231243::integer(10,3) as c, length(0.1242343) as d;
     a     |     b     |   c   | d
-----------+-----------+-------+---
 0.1231243 | 0.1231243 | 0.123 | 9
(1 row)</pre>
</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row528635394812"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p128618539487"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p128618539487"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p128618539487"></a>compat_analyze_sample</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p828635304814"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p828635304814"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p828635304814"></a>analyze采样行为配置项。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p108691828173114"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p108691828173114"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p108691828173114"></a>设置此配置项时，会优化analyze的采样行为，主要体现在analyze时全局采样会更精确的控制在3万条左右，更好的控制analyze时DBnode端的内存消耗，保证analyze性能的稳定性。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row84793168551"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p7480171620559"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p7480171620559"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p7480171620559"></a>bind_schema_tablespace</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p7391102013556"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p7391102013556"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p7391102013556"></a>绑定模式与同名表空间配置项。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p164801516195514"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p164801516195514"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p164801516195514"></a>如果存在与模式名sche_name相同的表空间名，那么如果设置search_path为sche_name， default_tablespace也会同步切换到sche_name。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row104641129185511"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p4465122914550"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p4465122914550"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p4465122914550"></a>bind_procedure_searchpath</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p195111830125718"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p195111830125718"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p195111830125718"></a>未指定模式名的数据库对象的搜索路径配置项。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p12261948214"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p12261948214"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p12261948214"></a>在存储过程中如果不显示指定模式名，会优先在存储过程所属的模式下搜索。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p716129629"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p716129629"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p716129629"></a>如果找不到，则有两种情况：</p>
<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul7861812102420"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul7861812102420"></a><ul id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul7861812102420"><li>若不设置此参数，报错退出。</li><li>若设置此参数，按照search_path中指定的顺序继续搜索。如果还是找不到，报错退出。</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row24411166214"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p20442166924"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p20442166924"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p20442166924"></a>correct_to_number</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p13214155316919"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p13214155316919"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p13214155316919"></a>控制to_number()结果兼容性的配置项。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p104421662219"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p104421662219"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p104421662219"></a>若设置此配置项，则to_number()函数结果与pg11保持一致，否则默认与O db保持一致。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row789175471518"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p1289114540156"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p1289114540156"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p1289114540156"></a>unbind_dive_bound</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p88921554101510"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p88921554101510"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p88921554101510"></a>控制对整数除法的结果进行范围校验。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p12567153015184"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p12567153015184"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p12567153015184"></a>若设置此配置项，则不需要对除法结果做范围校验，例如，INT_MIN/(-1)可以得到输出结果为INT_MAX+1，反之，则会因为超过结果大于INT_MAX而报越界错误。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row648032118477"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p16481102116476"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p16481102116476"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p16481102116476"></a>return_null_string</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p17481162111477"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p17481162111477"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p17481162111477"></a>控制函数lpad()和rpad()结果为空字符串''的显示配置项。</p>
<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul828544001313"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul828544001313"></a><ul id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul828544001313"><li>不设置此配置项时，空字符串显示为NULL。</li></ul>
<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_screen17865171482915"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_screen17865171482915"></a><pre class="screen" codetype="Sql" id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_screen17865171482915"><span id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text19711022217"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text19711022217"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text19711022217"></a>postgres=# </span>select length(lpad('123',0,'*')) from sys_dummy;
length
\--------\
(1 row)</pre>
<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul75590181418"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul75590181418"></a><ul id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_ul75590181418"><li>设置此配置项时，空字符串显示为''。</li></ul>
<a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_screen104295208294"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_screen104295208294"></a><pre class="screen" codetype="Sql" id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_screen104295208294"><span id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text171811411192213"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text171811411192213"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text171811411192213"></a>postgres=# </span>select length(lpad('123',0,'*')) from sys_dummy;
length
\--------\
0
(1 row)</pre>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row1255211543476"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p19552125434713"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p19552125434713"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p19552125434713"></a>compat_concat_variadic</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p15521954134717"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p15521954134717"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p15521954134717"></a>控制函数concat()和concat_ws()对variadic类型结果兼容性的配置项。</p>
<p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p1060812139425"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p1060812139425"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p1060812139425"></a>若设置此配置项，当concat函数参数为variadic类型时，保留a db和Teradata兼容模式下不同的结果形式；否则默认a db和Teradata兼容模式下结果相同，且与a db保持一致。由于MY无variadic类型，所以该选项对MY无影响。</p>
</td>
</tr>
<tr id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_row4359610142013"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p123596109205"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p123596109205"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p123596109205"></a><span id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text938325714529"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text938325714529"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_text938325714529"></a>merge_update_multi</span></p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p15359171062012"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p15359171062012"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p15359171062012"></a>控制在使用MERGE INTO ... WHEN MATCHED THEN UPDATE（参考<a href="merge-into.md">MERGE INTO</a>）和INSERT ... ON DUPLICATE KEY UPDATE（参考<a href="insert.md">INSERT</a>）时，当目标表中一条目标数据与多条源数据冲突时UPDATE行为。</p><p id="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p87151258513"><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p87151258513"></a><a name="zh-cn_topic_0283137574_zh-cn_topic_0237124754_p87151258513"></a>若设置此配置项，当存在上述场景时，该冲突行将会多次执行UPDATE；否则（默认）报错，即MERGE或INSERT操作失败。</p>
</td>
</tr>
<tr id="row184421757173910"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p104421057113910"><a name="p104421057113910"></a><a name="p104421057113910"></a>hide_tailing_zero</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p154421657193919"><a name="p154421657193919"></a><a name="p154421657193919"></a>numeric显示配置项。不设置此项时，numeric按照指定精度显示。设置此项时，所有输出numeric的场景均隐藏小数点后的末尾0，包括显示指定format精度情况。</p>
<pre class="screen" id="screen884155441017"><a name="screen884155441017"></a><a name="screen884155441017"></a><span id="text19602316173318"><a name="text19602316173318"></a><a name="text19602316173318"></a>openGauss=# </span>set behavior_compat_options='hide_tailing_zero';
<span id="text17445191893318"><a name="text17445191893318"></a><a name="text17445191893318"></a>openGauss=# </span>select cast(123.123 as numeric(15,10)) as a, to_char(cast(123.123 as numeric(15,10)), '999D999999');
    a    | to_char
---------+----------
 123.123 |  123.123
(1 row)
<span id="text11885172012339"><a name="text11885172012339"></a><a name="text11885172012339"></a>openGauss=# </span>set behavior_compat_options='';
<span id="text17747122133310"><a name="text17747122133310"></a><a name="text17747122133310"></a>openGauss=# </span>select cast(123.123 as numeric(15,10)) as a, to_char(cast(123.123 as numeric(15,10)), '999D999999');
       a        |   to_char
----------------+-------------
 123.1230000000 |  123.123000
(1 row)</pre>
</td>
</tr>
<tr id="row036062201417"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p16360425147"><a name="p16360425147"></a><a name="p16360425147"></a>rownum_type_compat</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p63603214149"><a name="p63603214149"></a><a name="p63603214149"></a>控制ROWNUM的类型，ROWNUM默认类型为INT8，设置此参数后，ROWNUM类型变更为NUMERIC类型。</p>
</td>
</tr>
<tr id="row1093032817487"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p89303283484"><a name="p89303283484"></a><a name="p89303283484"></a>aformat_null_test</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p193002814811"><a name="p193002814811"></a><a name="p193002814811"></a>控制rowtype类型判空逻辑,设置此项时，对于rowtype is not null判断，当一行数据有一列不为空的时候返回ture。</p>
<p id="p76670590522"><a name="p76670590522"></a><a name="p76670590522"></a>否则，对于rowtype is not null判断，当一行数据所有列不为空的时候返回ture.</p>
</td>
</tr>
<tr id="row442921018447"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p242931012443"><a name="p242931012443"></a><a name="p242931012443"></a>aformat_regexp_match</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p17429171054413"><a name="p17429171054413"></a><a name="p17429171054413"></a>控制正则表达式函数的匹配行为。</p>
<div class="p" id="p176212101138"><a name="p176212101138"></a><a name="p176212101138"></a>设置此项，且sql_compatibility参数的值为A或B时，正则表达式的 flags 参数支持的选项含义有变更：<a name="ol632826837"></a><a name="ol632826837"></a><ol id="ol632826837"><li>. 默认不能匹配 '\n' 字符。</li><li>flags 中包含n选项时， . 能够匹配 '\n' 字符。</li><li>regexp_replace(source, pattern replacement) 函数替换所有匹配的子串。</li><li>regexp_replace(source, pattern, replacement, flags) 在 flags值为'' 或者null时，返回值为null。</li></ol>
</div>
<p id="p15726183855"><a name="p15726183855"></a><a name="p15726183855"></a>否则，正则表达式的 flags 参数支持的选项含义：</p>
<a name="ol18494352043"></a><a name="ol18494352043"></a><ol id="ol18494352043"><li>. 默认能匹配 '\n' 字符。</li><li>flags 中的 n 选项表示按照多行模式匹配。</li><li>regexp_replace(source, pattern replacement) 函数仅替换第一个匹配到的子串。</li><li>regexp_replace(source, pattern, replacement, flags) 在 flags值为'' 或者null时，返回值为替换后的字符串。</li></ol>
</td>
</tr>
<tr id="row8351193618505"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p133528368507"><a name="p133528368507"></a><a name="p133528368507"></a>compat_cursor</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p19352436185016"><a name="p19352436185016"></a><a name="p19352436185016"></a>控制隐式游标状态兼容行为。设置此项，且兼容O，隐式游标状态（SQL%FOUND、SQL%NOTFOUND、SQL%ISOPNE、SQL%ROWCOUNT）由原先的仅在当前执行的函数有效，拓展到包括本函数调用的子函数有效。</p>
</td>
</tr>
<tr id="row18735102911156"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p1973572931511"><a name="p1973572931511"></a><a name="p1973572931511"></a>proc_outparam_override</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p20735112918154"><a name="p20735112918154"></a><a name="p20735112918154"></a>控制存储过程出参的重载行为，打开该参数后，对于存储过程只有out出参部分不同的情况下，也可以正常调用。</p>
</td>
</tr>
<tr id="row56517437529"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p943192894419"><a name="p943192894419"></a><a name="p943192894419"></a>proc_implicit_for_loop_variable</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p343142824413"><a name="p343142824413"></a><a name="p343142824413"></a>控制存储过程中FOR_LOOP查询语句行为设置此项时，在FOR rec IN query LOOP语句中，若rec已经定义，不会复用已经定义的rec变量，而且重新建立一个新的变量。否则，会复用已经定义的rec变量，不会建立新的变量。</p>
</td>
</tr>
<tr id="row2012934012159"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p18130240101518"><a name="p18130240101518"></a><a name="p18130240101518"></a>allow_procedure_compile_check</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p16662358118"><a name="p16662358118"></a><a name="p16662358118"></a>控制存储过程中select语句和open cursor语句的编译检查设置此项时，在存储过程中执行select语句、open cursor for语句、cursor%rowtype语句、for rec in语句时，若查询的表不存在，则无法创建创建存储过程，不支持trigger函数的编译检查，若查询的表存在，则成功创建存储过程。</p>
</td>
</tr>
<tr id="row14769111017289"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p1976961013282"><a name="p1976961013282"></a><a name="p1976961013282"></a>char_coerce_compat</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p1276918101287"><a name="p1276918101287"></a><a name="p1276918101287"></a>控制char(n)类型向其它变长字符串类型转换时的行为。默认情况下char(n)类型转换其它变长字符串类型时会省略尾部的空格，开启该参数后，转换时不再省略尾部的空格，并且在转换时如果char(n)类型的长度超过其它变长字符串类型时将会报错。该参数仅在sql_compatibility参数的值为A时生效。</p>
</td>
</tr>
<tr id="row16900202213345"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p169001822183412"><a name="p169001822183412"></a><a name="p169001822183412"></a>truncate_numeric_tail_zero</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p74891049203418"><a name="p74891049203418"></a><a name="p74891049203418"></a>numeric显示配置项。不设置此项时，numeric按照默认精度显示。设置此项时，除去to_char(numeric, format)这种显示设置精度的情况，所有输出numeric的场景均会隐藏小数点后的末尾0。例如：</p>
<pre class="screen" id="screen495515577331"><a name="screen495515577331"></a><a name="screen495515577331"></a><span id="text12584828173314"><a name="text12584828173314"></a><a name="text12584828173314"></a>openGauss=# </span>set behavior_compat_options='truncate_numeric_tail_zero';
<span id="text173061730133312"><a name="text173061730133312"></a><a name="text173061730133312"></a>openGauss=# </span>select cast(123.123 as numeric(15,10)) as a, to_char(cast(123.123 as numeric(15,10)), '999D999999');
    a    |   to_char
---------+-------------
 123.123 |  123.123000
(1 row)
<span id="text11558733163313"><a name="text11558733163313"></a><a name="text11558733163313"></a>openGauss=# </span>set behavior_compat_options='';
<span id="text13649635133319"><a name="text13649635133319"></a><a name="text13649635133319"></a>openGauss=# </span>select cast(123.123 as numeric(15,10)) as a, to_char(cast(123.123 as numeric(15,10)), '999D999999');
       a        |   to_char
----------------+-------------
 123.1230000000 |  123.123000
(1 row)</pre>
</td>
</tr>
<tr id="row14769111017289"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p1976961013282"><a name="p1976961013282"></a><a name="p1976961013282"></a>pgformat_substr</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p1276918101287"><a name="p1276918101287"></a><a name="p1276918101287"></a>控制substr(str, from, for)在不同场景下的表现。默认情况下，当from小于0时，substr将从字符串尾部开始计数；当for小于1时，substr将返回NULL。开启该参数后，当from小于0时，将从字符串的第一位的前(-from + 1)位开始计数；当for小于0时，substr将报错。该参数仅在sql_compatibility参数的值为PG时生效。</p>
</td>
</tr>
<tr id="row14769111017289"><td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 "><p id="p1976961013282"><a name="p1976961013282"></a><a name="p1976961013282"></a>plpgsql_dependency</p>
</td>
<td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 "><p id="p1276918101287"><a name="p1276918101287"></a><a name="p1276918101287"></a>开启此参数后，创建函数，存储过程，包支持未定义的对象。可以新建成功。可以在GS_DEPENDENCIES和GS_DEPENDENCIES_OBJ查询对应的依赖关系。 <p> 开启此参数后，创建PLSQL对象时，会主动维护依赖于该PLSQL对象的OID，不再需要用户手动更新。</p><p>  注意: 1.在并发创建PLSQL对象时，如果需要维护的对象间存在竞争关系，可能会造成死锁。</p>
</td>
</tr>
<tr id="row14769111017290">
    <td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 ">allow_orderby_undistinct_column</td>
    <td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 ">SQL语法兼容B的情况下，开启此参数后，select语句支持order by后面的列不在distinct中。如: select distinct a from test order by b;<p>注意：该参数只支持distinct，不支持distinct on，且当 DOLPHIN 插件存在时不生效，转由 dolphin.sql_mode 参数控制。dolphin.sql_mode 未设置 sql_mode_full_group 选项时相当于打开此选项。</p></td>
</tr>
<tr id="row14769111017290">
    <td class="cellrowborder" valign="top" width="24.43%" headers="mcps1.2.3.1.1 ">select_into_return_null</td>
    <td class="cellrowborder" valign="top" width="75.57000000000001%" headers="mcps1.2.3.1.2 ">在B或PG兼容模式下，开启此参数后，存储过程语句SELECT select_expressions INTO [STRICT] target FROM ... 允许在不指定STRICT并且查询结果为空时给变量赋NULL值。</p></td>
</tr>
</tbody>
</table>

## plpgsql.variable\_conflict<a name="section644112422314"></a>

**参数说明**：设置同名的存储过程变量和表的列的使用优先级。

该参数属于USERSET类型参数，仅支持[表2](重设参数.md#zh-cn_topic_0283137176_zh-cn_topic_0237121562_zh-cn_topic_0059777490_t290c8f15953843db8d8e53d867cd893d)中对应设置方法3进行设置。

**取值范围**：字符串

-   error表示遇到存储过程变量和表的列名同名则编译报错。
-   use\_variable表示存储过程变量和表的列名同名则优先使用变量。
-   use\_column表示存储过程变量和表的列名同名则优先使用列名。

**默认值**：error

## td\_compatible\_truncation<a name="zh-cn_topic_0283137001_zh-cn_topic_0237124738_zh-cn_topic_0059779195_sb8212ce57eb9432a972e390f77203b7c"></a>

**参数说明：**控制是否开启与Teradata数据库相应兼容的特征。该参数在用户连接上与TD兼容的数据库时，可以将参数设置成为on（即超长字符串自动截断功能启用），该功能启用后，在后续的insert语句中，对目标表中char和varchar类型的列插入超长字符串时，会按照目标表中相应列定义的最大长度对超长字符串进行自动截断。保证数据都能插入目标表中，而不是报错。

>![](public_sys-resources/icon-note.gif) **说明：**
>超长字符串自动截断功能不适用于insert语句包含外表的场景。如果向字符集为字节类型编码（SQL\_ASCII、LATIN1等）的数据库中插入多字节字符数据（如汉字等)，且字符数据跨越截断位置，这种情况下，按照字节长度自动截断，自动截断后会在尾部产生非预期结果。如果用户有对于截断结果正确性的要求，建议用户采用UTF8等能够按照字符截断的输入字符集作为数据库的编码集。

该参数属于USERSET类型参数，请参考[表1](重设参数.md#zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**布尔型

-   on表示启动超长字符串自动截断功能。
-   off表示停止超长字符串自动截断功能。

**默认值：**off

## lastval\_supported<a name="section17186174713490"></a>

**参数说明：**控制是否可以使用lastval函数。

该参数属于POSTMASTER类型参数，请参考[表1](重设参数.md#zh-cn_topic_0283137176_zh-cn_topic_0237121562_zh-cn_topic_0059777490_t91a6f212010f4503b24d7943aed6d846)中对应设置方法进行设置。

**取值范围：**布尔型

-   on表示支持lastval函数，同时nextval函数不支持下推。
-   off表示不支持lastval函数，同时nextval函数可以下推。

**默认值：**off

