<nav id="docs-menu">
  {{ partial "docs/inject/menu-before" . }}


{{ if .Site.Params.BookMenuBundle }}
<div class="nav">
  <div id="docstreeview">
    {{ partial "docs/menu-bundle" . }}
</div>
  <div class="download-button">
  </div>
</div>

{{ else }}
    {{ partial "docs/menu-filetree" . }}
{{ end }}

</nav>

<!-- Restore menu position as soon as possible to avoid flickering -->
<script>
(function() {
  var menu = document.querySelector("#docs-menu");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>
