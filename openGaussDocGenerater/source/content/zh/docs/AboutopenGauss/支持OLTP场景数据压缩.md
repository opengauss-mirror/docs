# 支持OLTP场景数据压缩

## 可获得性<a name="section15406143204715"></a>

本特性自openGauss 3.0.0版本开始引入。

在openGauss 3.1.0版本中将pca文件和pcd文件整合为一个文件；pca独立进行加载淘汰管理，不再依赖mmap操作；新增chunk碎片整理操作。

## 特性简介<a name="section740615433477"></a>

支持OLTP场景行存数据压缩，提供通用压缩算法，通过对数据页的透明页压缩和维护页面存储位置的方式，做到高压缩、高性能。提高数据库对磁盘的利用率。

## 客户价值<a name="section1067215172372"></a>

典型使用场景是：希望降低数据库磁盘的空间需求。

## 特性描述<a name="section1017916314374"></a>

新增的支持OLTP场景数据压缩可以降低行表、索引数据的磁盘存储空间需求，在IO密集的数据库系统，可以有一定的性能提升。

## 特性约束<a name="section1694165712371"></a>

- 仅支持堆组织形式数据表的压缩，即普通行存表、Btree索引压缩。
- 操作系统必须支持punch hole操作。
- 数据备份介质必须支持punch hole操作。
- 支持修改行存表的压缩相关参数，修改压缩相关参数会对行存表做重建。不支持修改索引的压缩相关参数。
- 压缩和解压缩的操作会对CPU、性能有一定的影响，优点是增大磁盘的存储能力，提高磁盘利用率，同时节省磁盘IO，减少磁盘IO压力。

## 依赖关系

- 要求数据库支持双写操作。
- 压缩时使用开源压缩算法PGLZ、ZSTD。

