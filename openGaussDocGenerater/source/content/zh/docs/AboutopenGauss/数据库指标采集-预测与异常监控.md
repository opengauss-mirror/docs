# 数据库指标采集、预测与异常监控

## 可获得性<a name="section1394818443613"></a>

本特性自openGauss 1.1.0版本开始引入。

## 特性简介<a name="section36382403357"></a>

本特性是openGauss集成的、可以用于数据库指标采集、预测以及异常监控与诊断的AI工具，是DBMind套间中的一个组件。当前通过兼容Prometheus平台来采集数据库系统的指标，提供Prometheus exporter用于采集和加工数据库监控指标。通过监控指标时序数据，可以用来预测未来负载走向，诊断问题，同时还可以进行异常检测等。

## 客户价值<a name="section5621105733410"></a>

-   极大简化运维人员工作，释放大量劳动力，为公司节省成本。
-   用户可以通过指标采集、监控和预测功能提前感知问题，从而防止数据库发生意外，导致更大的损失。

## 特性描述<a name="section117712392341"></a>

Prometheus是业内非常流行的开源监控系统，同时本身也是一款时序数据库。Prometheus的采集端称之为exporter，用来收集被监控模块的指标项。为了与Prometheus平台完成对接，DBMind分别实现了两款exporter，分别是用来采集数据库指标的openGauss-exporter，以及对采集到的指标进行二次加工的reprocessing-exporter。

本特性支持对采集到的指标进行预测，用户可通过修改配置文件来指定需要进行预测的关键系统指标（KPI），进而便于用户发现指标的走势，及时进行对应的运维操作。如预测内存使用率可以发现内存泄漏、预测磁盘使用情况可以在合适的时候扩容。基于AI的异常检测算法，可以发现指标的走势波动，进而促使用户及时地发现问题。

## 特性增强<a name="section144513469345"></a>

在 openGauss 3.0.0 版本中，进行了大幅度改进，兼容Prometheus 平台，实现两个exporter 用于对接Prometheus。

## 特性约束<a name="section1613131119346"></a>

-   数据库状态正常，并且用户已将数据目录写入环境变量。
-   Python 版本要求3.6及以上。
-   配置Prometheus 监控平台，并启动本服务，以便监控数据可被收集。

## 依赖关系<a name="section4228145683310"></a>

Prometheus

